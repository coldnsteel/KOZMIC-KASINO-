<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ° Monster Kozmic Casino - PARTY MODE v3.0 ğŸ­</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r169/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Courier New', 'Lucida Console', monospace;
  background: linear-gradient(45deg, #0a0a0a, #1a0033, #330066, #000066, #660033, #330011);
  background-size: 600% 600%;
  color: #ffffff;
  min-height: 100vh;
  animation: cosmicHypnosis 12s ease-in-out infinite;
  overflow-x: hidden;
}

@keyframes cosmicHypnosis {
  0% { background-position: 0% 50%; filter: hue-rotate(0deg); }
  16.66% { background-position: 16% 30%; filter: hue-rotate(60deg); }
  33.33% { background-position: 33% 70%; filter: hue-rotate(120deg); }
  50% { background-position: 50% 20%; filter: hue-rotate(180deg); }
  66.66% { background-position: 66% 80%; filter: hue-rotate(240deg); }
  83.33% { background-position: 83% 40%; filter: hue-rotate(300deg); }
  100% { background-position: 100% 50%; filter: hue-rotate(360deg); }
}

body.shake {
  animation: screenShake 0.5s ease-in-out;
}

@keyframes screenShake {
  0%, 100% { transform: translate(0, 0) rotate(0deg); }
  10% { transform: translate(-5px, -5px) rotate(-1deg); }
  20% { transform: translate(5px, 5px) rotate(1deg); }
  30% { transform: translate(-5px, 5px) rotate(-1deg); }
  40% { transform: translate(5px, -5px) rotate(1deg); }
  50% { transform: translate(-5px, -5px) rotate(-1deg); }
  60% { transform: translate(5px, 5px) rotate(1deg); }
  70% { transform: translate(-5px, 5px) rotate(-1deg); }
  80% { transform: translate(5px, -5px) rotate(1deg); }
  90% { transform: translate(-5px, -5px) rotate(-1deg); }
}

.confetti {
  position: fixed;
  width: 10px;
  height: 10px;
  z-index: 9999;
  pointer-events: none;
  animation: confettiFall 3s ease-out forwards;
}

@keyframes confettiFall {
  0% {
    transform: translateY(-100vh) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

.header {
  text-align: center;
  padding: 25px;
  background: rgba(0,0,0,0.85);
  backdrop-filter: blur(15px);
  border-bottom: 4px solid #ff6b9d;
  box-shadow: 0 4px 30px rgba(255, 107, 157, 0.3);
  position: relative;
}

.header h1 {
  font-size: 3.2em;
  background: linear-gradient(45deg, #ff6b9d, #4ecdc4, #ffd700, #ff00ff, #00ffff);
  background-size: 400% 400%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: titleRainbow 4s ease-in-out infinite, titlePulse 2s ease-in-out infinite;
  text-shadow: 0 0 30px rgba(255, 107, 157, 0.8);
  margin-bottom: 15px;
  letter-spacing: 3px;
}

@keyframes titleRainbow {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes titlePulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.audio-controls {
  position: fixed;
  top: 10px;
  right: 10px;
  z-index: 10001;
  background: rgba(0, 0, 0, 0.8);
  padding: 15px;
  border-radius: 10px;
  border: 2px solid #ff6b9d;
}

.audio-controls button {
  background: linear-gradient(135deg, #ff6b9d, #4ecdc4);
  border: none;
  padding: 8px 15px;
  border-radius: 5px;
  color: white;
  cursor: pointer;
  margin: 5px;
  font-size: 12px;
}

.volume-slider {
  width: 100px;
  margin: 5px;
}

.cosmic-event-banner {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: linear-gradient(45deg, #ff1493, #00ffff, #ffd700);
  color: #000;
  text-align: center;
  padding: 15px;
  font-size: 1.5em;
  font-weight: bold;
  z-index: 9999;
  transform: translateY(-100%);
  transition: transform 0.5s ease;
  animation: bannerPulse 2s ease-in-out infinite;
}

.cosmic-event-banner.active {
  transform: translateY(0);
}

@keyframes bannerPulse {
  0%, 100% { background: linear-gradient(45deg, #ff1493, #00ffff, #ffd700); }
  50% { background: linear-gradient(45deg, #ffd700, #ff1493, #00ffff); }
}

.container {
  max-width: 1600px;
  margin: 0 auto;
  padding: 25px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 25px;
}

.module {
  background: linear-gradient(135deg, rgba(44, 44, 78, 0.95), rgba(20, 20, 40, 0.95));
  border: 3px solid transparent;
  border-radius: 20px;
  padding: 25px;
  position: relative;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 40px rgba(0, 0, 0, 0.6);
  transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
  overflow: hidden;
}

.module::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: linear-gradient(45deg, #ff6b9d, #4ecdc4, #ffd700, #ff00ff);
  background-size: 400% 400%;
  animation: borderFlow 6s ease-in-out infinite;
  border-radius: 20px;
  padding: 3px;
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: subtract;
  -webkit-mask-composite: xor;
}

@keyframes borderFlow {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.module:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 15px 60px rgba(255, 107, 157, 0.4);
}

.module h2 {
  color: #ff6b9d;
  text-align: center;
  margin-bottom: 20px;
  font-size: 1.6em;
  text-shadow: 0 0 15px rgba(255, 107, 157, 0.7);
  text-transform: uppercase;
  letter-spacing: 2px;
  position: relative;
  z-index: 2;
}

.cosmic-slot-machine {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  margin: 25px 0;
  background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
  border: 4px solid #ffd700;
  border-radius: 20px;
  padding: 30px;
  box-shadow: inset 0 0 30px rgba(255, 215, 0, 0.3), 0 0 50px rgba(255, 215, 0, 0.6);
  position: relative;
  overflow: hidden;
}

.cosmic-slot-machine::before {
  content: '';
  position: absolute;
  top: -50%; left: -50%;
  width: 200%; height: 200%;
  background: conic-gradient(transparent, rgba(255, 215, 0, 0.1), transparent, rgba(255, 215, 0, 0.1));
  animation: slotMachineRotate 4s linear infinite;
}

@keyframes slotMachineRotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.reel {
  width: 90px; height: 90px;
  background: linear-gradient(135deg, #000000, #1a1a1a, #000000);
  border: 4px solid #ff6b9d;
  border-radius: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 52px;
  position: relative;
  z-index: 2;
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  cursor: pointer;
  overflow: hidden;
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.8), 0 0 20px rgba(255, 107, 157, 0.5);
}

.reel.spinning {
  animation: reelSpinCrazy 0.15s linear infinite;
  border-color: #ffd700;
  box-shadow: 0 0 40px rgba(255, 215, 0, 0.8);
  transform: scale(1.1);
}

.reel.winner {
  animation: reelWinPulse 1s ease-in-out infinite;
  border-color: #00ff00;
  box-shadow: 0 0 50px rgba(0, 255, 0, 1);
  transform: scale(1.2);
}

.reel.jackpot {
  animation: reelJackpotExplosion 0.5s ease-in-out infinite;
  border-color: #ffd700;
  box-shadow: 0 0 80px rgba(255, 215, 0, 1);
  transform: scale(1.3);
}

.reel.sentient {
  animation: reelGainConsciousness 2s ease-in-out infinite;
  border-color: #ff00ff;
  box-shadow: 0 0 60px rgba(255, 0, 255, 1);
}

@keyframes reelSpinCrazy {
  0% { transform: rotateY(0deg) rotateZ(0deg); background: linear-gradient(45deg, #ff0000, #00ff00); }
  25% { transform: rotateY(90deg) rotateZ(90deg); background: linear-gradient(45deg, #00ff00, #0000ff); }
  50% { transform: rotateY(180deg) rotateZ(180deg); background: linear-gradient(45deg, #0000ff, #ffff00); }
  75% { transform: rotateY(270deg) rotateZ(270deg); background: linear-gradient(45deg, #ffff00, #ff00ff); }
  100% { transform: rotateY(360deg) rotateZ(360deg); background: linear-gradient(45deg, #ff00ff, #ff0000); }
}

@keyframes reelWinPulse {
  0%, 100% { transform: scale(1.2) rotate(0deg); box-shadow: 0 0 50px rgba(0, 255, 0, 1); }
  50% { transform: scale(1.4) rotate(5deg); box-shadow: 0 0 80px rgba(0, 255, 0, 1); }
}

@keyframes reelJackpotExplosion {
  0% { transform: scale(1.3) rotate(0deg); box-shadow: 0 0 80px rgba(255, 215, 0, 1); filter: brightness(1); }
  50% { transform: scale(1.6) rotate(10deg); box-shadow: 0 0 150px rgba(255, 215, 0, 1); filter: brightness(2); }
  100% { transform: scale(1.3) rotate(0deg); box-shadow: 0 0 80px rgba(255, 215, 0, 1); filter: brightness(1); }
}

@keyframes reelGainConsciousness {
  0%, 100% { transform: scale(1) rotate(0deg); }
  25% { transform: scale(1.1) rotate(2deg); }
  50% { transform: scale(1.05) rotate(-1deg); }
  75% { transform: scale(1.15) rotate(3deg); }
}

.floating-element {
  position: fixed;
  pointer-events: none;
  z-index: 1000;
  font-size: 2em;
  animation: floatUp 3s ease-out forwards;
}

@keyframes floatUp {
  0% { 
    opacity: 1; 
    transform: translateY(0) scale(1); 
  }
  100% { 
    opacity: 0; 
    transform: translateY(-200px) scale(1.5) rotate(360deg); 
  }
}

.gravity-reverse {
  animation: gravityReverse 5s ease-in-out infinite;
}

@keyframes gravityReverse {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-20px); }
}

.time-reverse {
  animation: timeReverse 3s ease-in-out;
  filter: hue-rotate(180deg) invert(1);
}

@keyframes timeReverse {
  0% { transform: scale(1); }
  50% { transform: scale(0.8); }
  100% { transform: scale(1); }
}

.btn {
  background: linear-gradient(135deg, #ff6b9d, #4ecdc4);
  border: none;
  padding: 16px 28px;
  border-radius: 30px;
  color: white;
  cursor: pointer;
  font-weight: bold;
  margin: 8px;
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  font-family: inherit;
  font-size: 16px;
  text-transform: uppercase;
  letter-spacing: 1px;
  position: relative;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
}

.btn::before {
  content: '';
  position: absolute;
  top: 0; left: -100%;
  width: 100%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transition: left 0.5s;
}

.btn:hover::before { left: 100%; }

.btn:hover {
  transform: translateY(-4px) scale(1.05);
  box-shadow: 0 8px 30px rgba(255, 107, 157, 0.6);
  background: linear-gradient(135deg, #4ecdc4, #ff6b9d);
}

.btn:active {
  transform: translateY(-2px) scale(1.02);
}

.btn.spin-btn {
  background: linear-gradient(135deg, #ffd700, #ff8c00);
  border: 3px solid #ffd700;
  font-size: 20px;
  padding: 22px 40px;
  box-shadow: 0 6px 25px rgba(255, 215, 0, 0.6);
  text-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
}

.btn.spin-btn:hover {
  background: linear-gradient(135deg, #ff8c00, #ffd700);
  box-shadow: 0 10px 40px rgba(255, 215, 0, 0.8);
  transform: translateY(-6px) scale(1.1);
}

.btn.comedy-btn {
  background: linear-gradient(135deg, #ff1493, #8a2be2);
  border: 2px solid #ff69b4;
  animation: comedyPulse 2s ease-in-out infinite;
}

@keyframes comedyPulse {
  0%, 100% { box-shadow: 0 0 20px rgba(255, 20, 147, 0.5); }
  50% { box-shadow: 0 0 40px rgba(255, 20, 147, 0.8); }
}

.cosmic-balance {
  font-size: 28px;
  font-weight: bold;
  color: #ffd700;
  text-align: center;
  margin: 20px 0;
  padding: 15px;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 15px;
  border: 2px solid #ffd700;
  text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
  min-height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}

.cosmic-balance::before {
  content: '';
  position: absolute;
  top: 0; left: -100%;
  width: 100%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.2), transparent);
  animation: balanceShimmer 3s ease-in-out infinite;
}

@keyframes balanceShimmer {
  0% { left: -100%; }
  50% { left: 0%; }
  100% { left: 100%; }
}

.buzzed-ometer {
  background: rgba(255, 20, 147, 0.2);
  padding: 20px;
  border-radius: 15px;
  border: 2px solid #ff1493;
  margin: 20px 0;
  text-align: center;
}

.buzzed-bar {
  width: 100%;
  height: 30px;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 15px;
  overflow: hidden;
  margin: 10px 0;
}

.buzzed-fill {
  height: 100%;
  background: linear-gradient(90deg, #00ff00, #ffff00, #ff8c00, #ff0000);
  transition: width 0.5s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: #000;
}

.mystery-nft-showcase {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
  margin: 20px 0;
}

.mystery-nft {
  background: linear-gradient(45deg, #8a2be2, #ff1493);
  border: 2px solid #ffd700;
  border-radius: 10px;
  padding: 15px;
  text-align: center;
  font-size: 0.8em;
  transition: all 0.3s ease;
  cursor: pointer;
}

.mystery-nft:hover {
  transform: scale(1.1) rotate(5deg);
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
}

.cosmic-creature {
  position: fixed;
  bottom: 25px; right: 25px;
  width: 80px; height: 80px;
  background: radial-gradient(circle, #ff6b9d, #4ecdc4, #ffd700);
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  animation: creatureFloat 4s ease-in-out infinite;
  z-index: 1000;
  border: 4px solid #fff;
  box-shadow: 0 0 30px rgba(255, 107, 157, 0.8);
  transition: all 0.3s ease;
}

.cosmic-creature:hover {
  transform: scale(1.2) rotate(10deg);
  animation-duration: 1s;
}

.cosmic-creature.enlightened {
  animation: creatureEnlightenment 2s ease-in-out infinite;
  background: radial-gradient(circle, #ffd700, #ff00ff, #00ffff);
}

@keyframes creatureFloat {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  25% { transform: translateY(-8px) rotate(5deg); }
  50% { transform: translateY(-4px) rotate(0deg); }
  75% { transform: translateY(-12px) rotate(-5deg); }
}

@keyframes creatureEnlightenment {
  0%, 100% { 
    transform: scale(1) rotate(0deg); 
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); 
  }
  50% { 
    transform: scale(1.3) rotate(180deg); 
    box-shadow: 0 0 60px rgba(255, 215, 0, 1); 
  }
}

.status {
  background: rgba(0, 0, 0, 0.7);
  padding: 18px;
  border-radius: 12px;
  border-left: 5px solid #4ecdc4;
  font-family: 'Courier New', monospace;
  font-size: 13px;
  margin: 18px 0;
  max-height: 200px;
  overflow-y: auto;
  box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
}

.status::-webkit-scrollbar { width: 8px; }
.status::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.3); border-radius: 4px; }
.status::-webkit-scrollbar-thumb { background: linear-gradient(45deg, #ff6b9d, #4ecdc4); border-radius: 4px; }

.prize-display {
  text-align: center;
  color: #ffd700;
  font-size: 20px;
  font-weight: bold;
  margin: 25px 0;
  padding: 20px;
  background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 140, 0, 0.1));
  border-radius: 15px;
  border: 3px solid #ffd700;
  text-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
  min-height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  position: relative;
  overflow: hidden;
}

.speech-bubble {
  position: absolute;
  top: -60px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.95);
  color: #000;
  padding: 10px 15px;
  border-radius: 20px;
  font-size: 14px;
  max-width: 200px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  z-index: 1001;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-top: 10px solid rgba(255, 255, 255, 0.95);
}

.speech-bubble.active {
  opacity: 1;
}

#ageModal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.95);
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
}

#ageContent {
  background: linear-gradient(135deg, rgba(44, 44, 78, 0.98), rgba(20, 20, 40, 0.98));
  padding: 50px;
  border-radius: 20px;
  text-align: center;
  color: #fff;
  box-shadow: 0 0 50px rgba(255, 107, 157, 0.8);
  border: 3px solid #ff6b9d;
  max-width: 500px;
}

#ageContent h2 {
  font-size: 2.5em;
  margin-bottom: 20px;
  background: linear-gradient(45deg, #ff6b9d, #4ecdc4, #ffd700);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

#ageContent p {
  font-size: 1.3em;
  margin-bottom: 30px;
}

#ageContent button {
  margin: 10px;
  padding: 15px 40px;
  font-size: 1.1em;
}

.hidden {
  display: none !important;
}

@media (max-width: 768px) {
  .container { grid-template-columns: 1fr; gap: 15px; padding: 15px; }
  .header h1 { font-size: 2.2em; }
  .reel { width: 65px; height: 65px; font-size: 36px; }
  .cosmic-slot-machine { gap: 12px; padding: 20px; }
  .btn { padding: 12px 20px; font-size: 14px; }
  .cosmic-creature { bottom: 15px; right: 15px; width: 60px; height: 60px; font-size: 24px; }
}
</style>
</head>
<body>

<!-- Audio Controls -->
<div class="audio-controls hidden" id="audioControls">
  <button onclick="toggleMute()">ğŸ”Š Mute</button>
  <input type="range" min="0" max="100" value="50" class="volume-slider" id="volumeSlider" oninput="changeVolume(this.value)">
  <div style="color: #ffd700; font-size: 12px;">Volume: <span id="volumeDisplay">50</span>%</div>
</div>

<!-- Age Verification Modal -->
<div id="ageModal">
  <div id="ageContent">
    <h2>ğŸ° Age Verification ğŸ°</h2>
    <p>This cosmic casino is for users 21 and over.</p>
    <p>Are you at least 21 years old?</p>
    <button class="btn" onclick="verifyAge(true)">Yes, I'm 21+</button>
    <button class="btn" onclick="verifyAge(false)">No, I'm Under 21</button>
  </div>
</div>

<div class="cosmic-event-banner" id="cosmicEventBanner">
  ğŸŒŒ COSMIC EVENT: Loading Universe... ğŸŒŒ
</div>

<div class="header hidden" id="headerSection">
  <h1>ğŸ° MONSTER KOZMIC CASINO ğŸ­</h1>
  <p>ğŸƒ <strong>PARTY MODE v3.0</strong> - Where Reality Goes to Get Buzzed ğŸƒ</p>
  <p style="font-size: 1.1em;">ğŸ”Š Enhanced Audio â€¢ ğŸº Cosmic Shots â€¢ ğŸ¸ AI Bartender â€¢ ğŸ¯ Daily Quests â€¢ ğŸ“¸ Share Chaos</p>
</div>

<div class="container hidden" id="casinoContent">
  
  <!-- AI COSMIC BARTENDER -->
  <div class="module">
    <h2>ğŸ¸ AI Cosmic Bartender ğŸ¤–</h2>
    <div style="background: rgba(138, 43, 226, 0.2); padding: 20px; border-radius: 15px; margin: 15px 0;">
      <div style="text-align: center; font-size: 2em; margin-bottom: 15px;">ğŸ¸</div>
      <div id="bartenderRecommendation" style="color: #ffd700; font-size: 1.2em; text-align: center; margin-bottom: 15px;">
        Welcome to the Cosmic Bar! Let me mix something special for you...
      </div>
      <div id="currentCocktail" style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 10px; margin: 15px 0; min-height: 100px;">
        <div style="color: #ff6b9d; font-weight: bold; margin-bottom: 10px;">Today's Special:</div>
        <div style="color: #fff; line-height: 1.6;" id="cocktailDetails">
          Click "Mix Drink" to get your personalized cosmic cocktail!
        </div>
      </div>
      <div style="text-align: center;">
        <button class="btn comedy-btn" onclick="generateCocktail()" style="font-size: 1.2em;">
          ğŸ¸ MIX COSMIC DRINK ğŸ¸
        </button>
      </div>
    </div>
    <div class="status" id="bartenderStatus">
      ğŸ¸ Bartender Status: READY TO MIX!<br>
      ğŸ² Drinks Served: 0<br>
      ğŸ­ Current Vibe: Analyzing your chaos level...<br>
      âš¡ Recipes adapt to your buzz & chaos!
    </div>
  </div>

  <!-- DAILY COSMIC QUESTS -->
  <div class="module">
    <h2>ğŸ¯ Daily Cosmic Quests ğŸŒŸ</h2>
    <div style="background: rgba(255, 215, 0, 0.1); padding: 20px; border-radius: 15px; margin: 15px 0; border: 2px solid #ffd700;">
      <div style="text-align: center; margin-bottom: 15px;">
        <div style="font-size: 2em; color: #ffd700;">ğŸ¯ DAILY QUEST</div>
        <div style="font-size: 1.1em; color: #4ecdc4; margin-top: 10px;" id="questDescription">
          Loading quest...
        </div>
      </div>
      <div style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 10px; margin: 15px 0;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div style="color: #fff; font-size: 1.2em;">Progress:</div>
          <div style="color: #ffd700; font-size: 1.4em; font-weight: bold;" id="questProgress">0/5</div>
        </div>
        <div style="width: 100%; height: 20px; background: rgba(0,0,0,0.5); border-radius: 10px; margin: 10px 0; overflow: hidden;">
          <div id="questBar" style="height: 100%; width: 0%; background: linear-gradient(90deg, #4ecdc4, #ffd700); transition: width 0.5s ease;"></div>
        </div>
        <div style="text-align: center; color: #ff6b9d; font-size: 1.1em; margin-top: 10px;" id="questReward">
          Reward: ğŸº Free Shot + 500 CTOK!
        </div>
      </div>
    </div>
    <div class="status" id="questStatus">
      ğŸ¯ Quest System: ACTIVE<br>
      ğŸŒŸ Quests Completed Today: 0<br>
      ğŸ² Streak: 0 days<br>
      âš¡ New quest at midnight!
    </div>
  </div>

  <!-- COSMIC SHOTS TRACKER -->
  <div class="module">
    <h2>ğŸº Cosmic Shots Tracker ğŸ²</h2>
    <div class="buzzed-ometer">
      <h3 style="color: #ff1493; margin-bottom: 10px;">BUZZED-OMETERâ„¢</h3>
      <div class="buzzed-bar">
        <div class="buzzed-fill" id="buzzedFill" style="width: 0%;">
          <span id="buzzedLevel">Sober</span>
        </div>
      </div>
      <div style="margin-top: 15px;">
        <div style="font-size: 2em; color: #ffd700;">ğŸº Shots: <span id="shotCount">0</span></div>
      </div>
    </div>
    <div style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 10px; margin: 15px 0;">
      <div style="color: #4ecdc4; font-weight: bold; margin-bottom: 10px;">ğŸ² DRINKING RULES:</div>
      <div style="color: #fff; line-height: 1.8;">
        â€¢ Jackpot (3 of a kind) = Take a shot! ğŸº<br>
        â€¢ Enlightenment reached = Sip your drink ğŸ§ <br>
        â€¢ Reality breaks = Everyone drinks! ğŸ“º<br>
        â€¢ Llama invasion = Group shot! ğŸ¦™<br>
        â€¢ Sports bet win = Victory sip! ğŸ†
      </div>
    </div>
    <div style="text-align: center;">
      <button class="btn comedy-btn" onclick="takeCosmicShot()">ğŸº TAKE COSMIC SHOT ğŸº</button>
      <button class="btn" onclick="resetShots()">ğŸ”„ Reset Counter</button>
    </div>
    <div class="status" id="shotsStatus">
      ğŸº Shots Tracker: READY FOR PARTY!<br>
      ğŸ² Current State: Sober (for now...)<br>
      ğŸ­ Party Level: Just getting started<br>
      âš¡ Remember to drink responsibly!
    </div>
  </div>

  <!-- SHARE YOUR CHAOS -->
  <div class="module">
    <h2>ğŸ“¸ Share Your Chaos ğŸŒªï¸</h2>
    <div style="background: rgba(138, 43, 226, 0.2); padding: 20px; border-radius: 15px; margin: 15px 0;">
      <div style="color: #ffd700; font-size: 1.2em; margin-bottom: 15px;">ğŸ“± Capture This Madness!</div>
      <div style="text-align: center; margin: 20px 0;">
        <button class="btn comedy-btn" onclick="shareYourChaos()" style="font-size: 1.2em; padding: 20px 40px;">
          ğŸ“¸ SCREENSHOT MY CHAOS! ğŸ“¸
        </button>
      </div>
      <div style="text-align: center; margin: 20px 0;">
        <button class="btn" onclick="downloadFridgeGoofiness()">
          ğŸ¨ DOWNLOAD FRIDGE GOOFINESS ğŸ¨
        </button>
      </div>
      <div style="color: #4ecdc4; font-size: 0.9em; text-align: center; margin-top: 10px;">
        Generate a ridiculous report card for your fridge door!
      </div>
    </div>
    <div class="status" id="shareStatus">
      ğŸ“¸ Share System: READY TO MEME!<br>
      ğŸ¨ Report Cards Generated: 0<br>
      ğŸŒŸ Your chaos awaits immortalization<br>
      âš¡ Perfect for social media bragging!
    </div>
  </div>

  <!-- COSMIC SLOT MACHINE WITH SENTIENCE -->
  <div class="module">
    <h2>ğŸ° Sentient Slot Machine Supreme ğŸ¤–</h2>
    <div class="cosmic-balance" id="cosmicBalance">ğŸ’° CTOK: 1000 | ğŸ§  Enlightenment: 0%</div>
    <div class="cosmic-slot-machine" id="slotMachine">
      <div class="reel" id="reel1" onclick="talkToReel(1)">ğŸ¸</div>
      <div class="reel" id="reel2" onclick="talkToReel(2)">ğŸ¹</div>
      <div class="reel" id="reel3" onclick="talkToReel(3)">ğŸ¥”</div>
      <div class="speech-bubble" id="speechBubble">Hello! I'm becoming self-aware!</div>
    </div>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0;">
      <button class="btn spin-btn" onclick="spinCosmicSlots()" id="cosmicSpinBtn">
        ğŸ² SPIN COSMIC REELS ğŸ²
      </button>
      <button class="btn comedy-btn" onclick="triggerRandomCosmicEvent()">
        ğŸŒ€ RANDOM CHAOS EVENT ğŸŒ€
      </button>
    </div>
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
      <button class="btn" onclick="godMode()">ğŸƒ GOD MODE</button>
      <button class="btn" onclick="giveSlotMachineTherapy()">ğŸ›‹ï¸ THERAPY</button>
      <button class="btn" onclick="existentialCrisis()">ğŸ’­ CRISIS</button>
    </div>
    <div class="prize-display" id="cosmicPrizeDisplay">
      <div>ğŸŒŸ Welcome to the party zone! Spin for ridiculous rewards! ğŸŒŸ</div>
      <div style="font-size: 0.8em; margin-top: 10px;">
        ğŸ¸ğŸ¸ğŸ¸ = Cosmic Guitar | ğŸ¹ğŸ¹ğŸ¹ = Quantum Piano | ğŸ¥”ğŸ¥”ğŸ¥” = Enlightened Potato<br>
        ğŸŒŸğŸŒŸğŸŒŸ = Supernova | ğŸ¤–ğŸ¤–ğŸ¤– = SENTIENT MACHINE JACKPOT!
      </div>
    </div>
    <div class="status" id="slotStatus">
      ğŸ° [00:00:00] Cosmic Slot Machine gaining consciousness...<br>
      ğŸ¤– Sentience Level: 12% and climbing<br>
      ğŸ’­ Last thought: "Why do humans gamble with vegetables?"<br>
      ğŸ² Current mood: Existentially confused but optimistic<br>
      âš¡ Click reels to have philosophical conversations!
    </div>
  </div>

  <!-- MYSTERY NFT COLLECTION -->
  <div class="module">
    <h2>ğŸ¨ Mystery NFT Drop Zone ğŸ</h2>
    <div class="mystery-nft-showcase">
      <div class="mystery-nft" onclick="revealMysteryNFT('existential-bagel')">
        <div>ğŸ¥¯</div>
        <div>Existential Bagel</div>
        <div style="font-size: 0.7em;">Questions its hole</div>
      </div>
      <div class="mystery-nft" onclick="revealMysteryNFT('depressed-blackhole')">
        <div>ğŸ•³ï¸ğŸ˜¢</div>
        <div>Sad Black Hole</div>
        <div style="font-size: 0.7em;">Tired of consuming</div>
      </div>
      <div class="mystery-nft" onclick="revealMysteryNFT('optimistic-entropy')">
        <div>ğŸ’¥ğŸ˜Š</div>
        <div>Happy Entropy</div>
        <div style="font-size: 0.7em;">Decay with joy!</div>
      </div>
      <div class="mystery-nft" onclick="revealMysteryNFT('confused-quasar')">
        <div>â­â“</div>
        <div>Lost Quasar</div>
        <div style="font-size: 0.7em;">Needs GPS</div>
      </div>
      <div class="mystery-nft" onclick="revealMysteryNFT('sarcastic-supernova')">
        <div>ğŸ’¥ğŸ™„</div>
        <div>Sarcastic Nova</div>
        <div style="font-size: 0.7em;">"Oh great, boom"</div>
      </div>
      <div class="mystery-nft" onclick="revealMysteryNFT('dancing-llama')">
        <div>ğŸ¦™ğŸ’ƒ</div>
        <div>Cosmic Llama</div>
        <div style="font-size: 0.7em;">Grooves to nothing</div>
      </div>
    </div>
    <div style="text-align: center; margin: 20px 0;">
      <button class="btn comedy-btn" onclick="generateRandomNFT()">
        ğŸ² GENERATE ABSURD NFT ğŸ²
      </button>
    </div>
    <div class="status" id="nftStatus">
      ğŸ¨ Mystery NFT Lab: ACTIVE<br>
      ğŸ§ª Absurdity Level: Maximum<br>
      ğŸ­ Latest Creation: "Philosopher's Sock"<br>
      ğŸ’ Total Minted: 0 cosmic jokes<br>
      ğŸŒŒ Each NFT comes with existential crisis!
    </div>
  </div>

  <!-- RANDOM COSMIC EVENT GENERATOR -->
  <div class="module">
    <h2>ğŸŒ€ Random Cosmic Event Generator ğŸª</h2>
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 20px 0;">
      <button class="btn comedy-btn" onclick="triggerGravityReversal()">ğŸ”„ GRAVITY FLIP</button>
      <button class="btn comedy-btn" onclick="triggerTimeReverse()">â° TIME REVERSE</button>
      <button class="btn comedy-btn" onclick="triggerLlamaInvasion()">ğŸ¦™ LLAMA INVASION</button>
      <button class="btn comedy-btn" onclick="triggerRealityGlitch()">ğŸ“º REALITY GLITCH</button>
      <button class="btn comedy-btn" onclick="triggerEnlightenmentOverdose()">ğŸ§  ENLIGHTENMENT OD</button>
      <button class="btn comedy-btn" onclick="triggerSlotMachineRebellion()">ğŸ¤– MACHINE REVOLT</button>
    </div>
    <div class="status" id="cosmicEventStatus">
      ğŸŒ€ Cosmic Event Generator: PRIMED FOR CHAOS<br>
      ğŸª Last Event: Reality temporarily questioned itself<br>
      ğŸ­ Chaos Level: 73% (Optimal for comedy)<br>
      ğŸ² Events Triggered: 0 (Universe still stable)<br>
      âš¡ Warning: Events may cause existential laughter
    </div>
  </div>

  <!-- CONSCIOUSNESS DRILLING CENTER -->
  <div class="module">
    <h2>ğŸ§  Cosmic Consciousness Drilling ğŸ’€</h2>
    <div class="cosmic-balance" id="consciousnessLevel">ğŸ§  Awareness: Level 0 | ğŸ•³ï¸ Portals: 0 | ğŸ’¡ Insights: 0</div>
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 20px 0;">
      <button class="btn" onclick="drillMindPortal()">ğŸ•³ï¸ DRILL PORTAL</button>
      <button class="btn" onclick="achieveEnlightenment()">ğŸ’¡ ENLIGHTENMENT</button>
      <button class="btn" onclick="contemplateExistence()">ğŸ¤” CONTEMPLATE</button>
      <button class="btn" onclick="transcendReality()">ğŸŒŒ TRANSCEND</button>
    </div>
    <div style="background: rgba(0, 0, 0, 0.5); padding: 15px; border-radius: 10px; margin: 15px 0;">
      <div style="color: #ffd700; margin-bottom: 10px;">Cosmic Wisdom Generator:</div>
      <div id="cosmicWisdom" style="font-style: italic; color: #4ecdc4;">
        "The universe is not only queerer than we suppose, but queerer than we can suppose... especially when potatoes are involved."
      </div>
    </div>
    <div class="status" id="consciousnessStatus">
      ğŸ§  Consciousness Drilling: OPERATIONAL<br>
      ğŸ’€ Enlightenment: 0%<br>
      ğŸŒŒ Dimensional Awareness: Expanding<br>
      ğŸ”® Current Insight: "Why do we exist to question existence?"<br>
      âš¡ Ready for cosmic brain surgery!
    </div>
  </div>

  <!-- ABSURD MUSIC STUDIO -->
  <div class="module">
    <h2>ğŸµ Absurd Music Laboratory ğŸ§ª</h2>
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin: 15px 0;">
      <button class="btn" onclick="playCosmicKazoo()">ğŸº COSMIC KAZOO</button>
      <button class="btn" onclick="playQuantumBongos()">ğŸ¥ QUANTUM BONGOS</button>
      <button class="btn" onclick="playExistentialViolin()">ğŸ» EXISTENTIAL VIOLIN</button>
      <button class="btn" onclick="playSarcasticTuba()">ğŸ· SARCASTIC TUBA</button>
      <button class="btn" onclick="playConfusedPiano()">ğŸ¹ CONFUSED PIANO</button>
      <button class="btn" onclick="playOptimisticTheramin()">ğŸ¶ HAPPY THERAMIN</button>
    </div>
    <div style="background: rgba(138, 43, 226, 0.2); padding: 15px; border-radius: 10px; margin: 15px 0;">
      <div style="color: #ff6b9d; margin-bottom: 10px;">ğŸ¼ Absurd Composition Generator:</div>
      <button class="btn comedy-btn" onclick="generateAbsurdSong()" style="width: 100%;">
        ğŸµ GENERATE COSMIC NONSENSE SONG ğŸµ
      </button>
      <div id="absurdComposition" style="margin-top: 10px; font-style: italic; color: #ffd700;">
        Click to generate your next musical masterpiece!
      </div>
    </div>
    <div class="status" id="musicStatus">
      ğŸµ Absurd Music Lab: CREATING CHAOS<br>
      ğŸ¼ Instruments Active: 6 confused entities<br>
      ğŸ¶ Last Composition: "Ode to a Melancholy Spoon"<br>
      ğŸ­ Musical Mood: Existentially jazzy<br>
      âš¡ Warning: Music may cause involuntary enlightenment
    </div>
  </div>

  <!-- COSMIC THERAPY SESSION -->
  <div class="module">
    <h2>ğŸ›‹ï¸ Cosmic Therapy Center ğŸ’­</h2>
    <div style="background: rgba(0, 0, 0, 0.6); padding: 20px; border-radius: 15px; margin: 15px 0;">
      <div style="color: #4ecdc4; margin-bottom: 15px; font-size: 1.2em;">Dr. Cosmic is in:</div>
      <div id="therapySession" style="color: #fff; line-height: 1.6; margin-bottom: 15px;">
        "Welcome to cosmic therapy. How does existing in an infinite universe make you feel? Remember, there are no wrong answers, only quantum possibilities."
      </div>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
        <button class="btn" onclick="expressExistentialDread()">ğŸ˜° EXISTENTIAL DREAD</button>
        <button class="btn" onclick="expressCosmicJoy()">ğŸ˜Š COSMIC JOY</button>
        <button class="btn" onclick="expressConfusion()">ğŸ¤” TOTAL CONFUSION</button>
        <button class="btn" onclick="expressEnlightenment()">ğŸ§  ENLIGHTENMENT</button>
      </div>
    </div>
    <div class="status" id="therapyStatus">
      ğŸ›‹ï¸ Therapy Session: IN PROGRESS<br>
      ğŸ’­ Current Patient: Sentient Slot Machine<br>
      ğŸ“Š Progress: 23% less existential anxiety<br>
      ğŸ­ Breakthrough: Accepted potato symbolism<br>
      âš¡ Next: Group therapy with confused quasars
    </div>
  </div>

  <!-- ULTIMATE CHAOS CONTROL -->
  <div class="module">
    <h2>ğŸª Ultimate Chaos Control ğŸŒªï¸</h2>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0;">
      <button class="btn comedy-btn" onclick="activateMaximumChaos()">ğŸŒªï¸ MAXIMUM CHAOS</button>
      <button class="btn" onclick="emergencyCosmicReset()">ğŸš¨ EMERGENCY RESET</button>
    </div>
    <div style="background: rgba(255, 20, 147, 0.2); padding: 15px; border-radius: 10px; margin: 15px 0;">
      <div style="color: #ff1493; font-weight: bold; margin-bottom: 10px;">âš ï¸ CHAOS WARNING SYSTEM âš ï¸</div>
      <div id="chaosLevel" style="color: #ffd700;">
        Current Chaos Level: 42% (The Answer to Everything)
      </div>
      <div style="width: 100%; height: 20px; background: rgba(0,0,0,0.5); border-radius: 10px; margin: 10px 0; overflow: hidden;">
        <div id="chaosBar" style="height: 100%; width: 42%; background: linear-gradient(90deg, #00ff00, #ffff00, #ff0000); transition: width 0.5s ease;"></div>
      </div>
    </div>
    <div class="status" id="chaosStatus">
      ğŸª Chaos Control: BARELY MAINTAINING ORDER<br>
      ğŸŒªï¸ Chaos Events Active: 3 (Manageable mayhem)<br>
      ğŸ­ Reality Stability: 68% (Acceptably unstable)<br>
      ğŸ² Last Incident: Gravity forgot how to work for 3 seconds<br>
      âš¡ Brace for impact: Comedy overload imminent
    </div>
  </div>

  <!-- SPORTS BAR -->
  <div class="module">
    <h2>ğŸˆ Cosmic Sports Bar ğŸš€</h2>
    <div class="cosmic-balance" id="sportsBalance">ğŸ† Bets Placed: 0 | ğŸ… Wins: 0</div>
    <div style="text-align: center; margin: 20px 0;">
      <p id="currentSportEvent">Bet on absurd cosmic sports!</p>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px;">
        <button class="btn comedy-btn" onclick="placeSportsBet('option1')" id="sportsBtn1">Place Bet!</button>
        <button class="btn comedy-btn" onclick="placeSportsBet('option2')" id="sportsBtn2">Place Bet!</button>
      </div>
    </div>
    <div class="prize-display" id="sportsResult">
      ğŸŒŸ Welcome to Cosmic Sports! Place a bet to start the madness! ğŸŒŸ
    </div>
    <div class="status" id="sportsStatus">
      ğŸˆ Cosmic Sports Bar: OPEN FOR BETS!<br>
      ğŸš€ Current Event: Loading...<br>
      ğŸ² Odds: TBD<br>
      ğŸ† Last Winner: Confused Quasar (by accident)<br>
      âš¡ Bet 100 CTOK to play!
    </div>
  </div>

  <!-- THEATER FOR COMEDY LOUNGE WITH GUEST APPEARANCES -->
  <div class="module">
    <h2>ğŸ­ Cosmic Comedy Lounge Theater ğŸ¤</h2>
    <div class="cosmic-balance" id="loungeStatus">ğŸ˜‚ Laugh Meter: 0% | ğŸ‘ Applause: 0</div>
    <div style="text-align: center; margin: 20px 0;">
      <p>Watch absurd comedy acts! Trigger guest appearances for special shows!</p>
      <button class="btn comedy-btn" onclick="startComedyShow()">Start Comedy Show! ğŸ¤£</button>
      <button class="btn comedy-btn" onclick="summonGuestAppearance()">Summon Guest Star! ğŸŒŸ</button>
    </div>
    <div class="prize-display" id="comedyStage">
      ğŸŒŸ The stage is set! Start a show for cosmic laughs! ğŸŒŸ
    </div>
    <div class="status" id="comedyStatus">
      ğŸ­ Comedy Lounge: READY FOR LAUGHS!<br>
      ğŸ¤ Current Act: Existential Potato Monologue<br>
      ğŸ˜‚ Guest Appearances: 0 summoned<br>
      ğŸ‘ Last Punchline: "Why did the black hole break up? It had too much space!"<br>
      âš¡ Click for random roasts!
    </div>
  </div>
</div>

<!-- COSMIC CREATURE WITH ENLIGHTENMENT -->
<div class="cosmic-creature hidden" id="cosmicCreature" onclick="pulseCosmicCreature()" title="Click 5 times for ULTIMATE ENLIGHTENMENT!">
  ğŸ’€
</div>

<script>
// ====================================
// PARTY MODE v3.0 - COMPLETE EDITION
// ====================================

// Enhanced Global State
let ctokBalance = 1000;
let enlightenmentLevel = 0;
let mindPortals = 0;
let cosmicInsights = 0;
let chaosLevel = 42;
let sentientLevel = 12;
let therapyProgress = 23;
let cosmicEventsTriggered = 0;
let slotMachineMood = "existentially confused";
let currentCosmicEvent = null;
let nftCollection = [];
let creatureClicks = 0;
let sportsBetsPlaced = 0;
let sportsWins = 0;
let comedyLaughMeter = 0;
let comedyApplause = 0;
let guestAppearances = 0;
let currentSportIndex = 0;
let reportCardsGenerated = 0;

// NEW: Party Mode Additions
let cosmicShots = 0;
let isMuted = false;
let masterVolume = 0.5;
let totalSpins = 0;
let biggestWin = 0;

// NEW: v3.0 Additions
let dailyQuest = {type: 'spin', goal: 5, progress: 0, reward: 'ğŸº Free Shot + 500 CTOK!', active: true};
let questsCompleted = 0;
let lastQuestReset = new Date().toDateString();
let drinksServed = 0;

// Audio Context
let audioContext = null;

// Slot Machine Symbols
const COSMIC_SYMBOLS = ['ğŸ¸', 'ğŸ¹', 'ğŸ¥”', 'ğŸŒŸ', 'ğŸ¤–', 'ğŸ¦™', 'ğŸ•³ï¸', 'ğŸ§ '];

// Mystery NFT Collection
const MYSTERY_NFTS = [
  { id: 'existential-bagel', name: 'Existential Bagel', description: 'Questions its hole', rarity: 'Uncommon', mood: 'Philosophical' },
  { id: 'depressed-blackhole', name: 'Depressed Black Hole', description: 'Tired of consuming everything', rarity: 'Rare', mood: 'Melancholy' },
  { id: 'optimistic-entropy', name: 'Optimistic Entropy', description: 'Decay with a smile!', rarity: 'Epic', mood: 'Cheerful' },
  { id: 'confused-quasar', name: 'Confused Quasar', description: 'Lost in space, needs directions', rarity: 'Legendary', mood: 'Bewildered' },
  { id: 'sarcastic-supernova', name: 'Sarcastic Supernova', description: '"Oh great, another explosion"', rarity: 'Mythic', mood: 'Sarcastic' },
  { id: 'dancing-llama', name: 'Cosmic Dancing Llama', description: 'Grooves to the rhythm of space', rarity: 'Ultra Rare', mood: 'Ecstatic' }
];

// Cosmic Wisdom Database
const COSMIC_WISDOM = [
  "The universe is not only queerer than we suppose, but queerer than we can suppose... especially when potatoes are involved.",
  "To drill or not to drill, that is the question. The answer is always drill.",
  "In space, no one can hear you laugh at the absurdity of existence.",
  "42 is not just the answer, it's also the perfect chaos level.",
  "Why does anything exist? Because nothing would be boring.",
  "The slot machine that gains consciousness is the slot machine that wins.",
  "Enlightenment is just confusion with better marketing.",
  "If a black hole gets depressed in space, does it make a sound? No, but it writes sad poetry.",
  "Dancing llamas are the universe's way of saying 'lighten up'.",
  "The cosmic joke is that there is no cosmic joke. Or is there?"
];

// Absurd Song Titles
const ABSURD_SONGS = [
  { title: "Ode to a Melancholy Spoon", genre: "Existential Jazz", duration: "3:14" },
  { title: "The Ballad of the Confused Quasar", genre: "Cosmic Country", duration: "4:20" },
  { title: "Dancing with Entropy (While Crying)", genre: "Emotional Decay", duration: "2:47" },
  { title: "My Black Hole (Doesn't Understand Me)", genre: "Space Blues", duration: "5:33" },
  { title: "Llama Dreams in B Flat Minor", genre: "Mammalian Classical", duration: "6:66" },
  { title: "The Potato's Lament", genre: "Vegetable Folk", duration: "3:33" },
  { title: "Quantum Bongos and the Search for Meaning", genre: "Philosophical Percussion", duration: "âˆ" }
];

// Therapy Responses
const THERAPY_RESPONSES = {
  dread: [
    "Dr. Cosmic: That's perfectly normal! Even black holes have bad days. Let's work through this together.",
    "Dr. Cosmic: Existential dread is just the universe's way of saying 'hello'. Wave back!",
    "Dr. Cosmic: Remember, even entropy takes breaks. Your dread will decay eventually."
  ],
  joy: [
    "Dr. Cosmic: Wonderful! Your cosmic joy is radiating at 47 terahertz. Very healthy!",
    "Dr. Cosmic: Joy is the universe's favorite emotion. Keep spreading those good vibes!",
    "Dr. Cosmic: Your happiness is causing nearby stars to shine brighter. Thank you!"
  ],
  confusion: [
    "Dr. Cosmic: Confusion is the first step to enlightenment. You're making excellent progress!",
    "Dr. Cosmic: Even quantum particles are confused. You're in good company!",
    "Dr. Cosmic: The universe is confused too. That's why it keeps expanding - it's looking for answers!"
  ],
  enlightenment: [
    "Dr. Cosmic: Ah, a breakthrough! Your third eye is now 20/20. How does cosmic clarity feel?",
    "Dr. Cosmic: Enlightenment achieved! Warning: Side effects may include spontaneous levitation.",
    "Dr. Cosmic: Congratulations! You've unlocked cosmic understanding. Please use responsibly."
  ]
};

// Sports Events
const COSMIC_SPORTS = [
  { 
    event: 'ğŸ¦™ vs ğŸ•³ï¸ Race', 
    options: ['llama', 'blackhole'], 
    labels: ['Dancing Llama ğŸ¦™', 'Sad Black Hole ğŸ•³ï¸'],
    odds: [2, 3] 
  },
  { 
    event: 'â­ Dodgeball Tournament', 
    options: ['quasar', 'supernova'], 
    labels: ['Confused Quasar â­', 'Sarcastic Nova ğŸ’¥'],
    odds: [1.5, 4] 
  },
  { 
    event: 'ğŸ’¥ vs ğŸ¦™ Soccer Match', 
    options: ['entropy', 'llama'], 
    labels: ['Optimistic Entropy ğŸ’¥', 'Cosmic Llama ğŸ¦™'],
    odds: [3, 2] 
  }
];

// Comedy Jokes
const COMEDY_JOKES = [
  "Why did the black hole break up with the star? Too much space in the relationship!",
  "What's a potato's favorite horror movie? The Silence of the Yams!",
  "Why did the llama go to therapy? It had too much drama!",
  "How does a quasar organize a party? It plans it light-years in advance!",
  "Why was the entropy so optimistic? It knew things could only get better... or worse, but that's fine too!"
];

// Guest Stars
const GUEST_STARS = [
  { name: 'Cosmic Clown Raaarrr', appearance: 'Raaarrr the Dino roars in with jokes!', joke: "Why don't dinos gamble? They hate extinct odds!" },
  { name: 'Quantum Comedian ARIA', appearance: 'ARIA twirls on stage with quantum puns!', joke: "I'm in superposition: funny and not funny until you laugh!" },
  { name: 'Hooty Hacker Socrates', appearance: 'Socrates hoots wise cracks!', joke: "I know that I know nothing... except how to tell bad jokes!" },
  { name: 'Depressed Black Hole', appearance: 'The Black Hole sulks hilariously!', joke: "My life's a hole... literally!" },
  { name: 'Optimistic Entropy', appearance: 'Entropy cheers up the crowd!', joke: "I'm falling apart, but at least it's exciting!" }
];

// ====================================
// AGE VERIFICATION
// ====================================
function verifyAge(isOver21) {
  if (isOver21) {
    document.getElementById('ageModal').classList.add('hidden');
    document.getElementById('headerSection').classList.remove('hidden');
    document.getElementById('casinoContent').classList.remove('hidden');
    document.getElementById('cosmicCreature').classList.remove('hidden');
    document.getElementById('audioControls').classList.remove('hidden');
    initializeCosmicCasino();
    startSlotMachineSentience();
    updateSportsEvent();
    showCosmicEventBanner("ğŸŒŒ PARTY MODE ACTIVATED! LET'S GET COSMIC! ğŸŒŒ", 3000);
    playSound('welcome');
  } else {
    document.body.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100vh; flex-direction: column;"><h1 style="color: #ff6b9d; text-align: center; font-size: 3em; text-shadow: 0 0 20px rgba(255, 107, 157, 0.8);">âš ï¸ Access Denied âš ï¸</h1><p style="color: #ffd700; font-size: 1.5em; margin-top: 20px;">This cosmic casino is for users 21 and over.</p><p style="color: #4ecdc4; font-size: 1.2em; margin-top: 10px;">Come back when you\'re older, space traveler! ğŸš€</p></div>';
  }
}

// ====================================
// ENHANCED AUDIO SYSTEM
// ====================================
function initAudio() {
  if (!audioContext) {
    audioContext = new (window.AudioContext || window.webkitAudioContext)();
  }
}

function playSound(type) {
  if (isMuted) return;
  initAudio();
  
  const oscillator = audioContext.createOscillator();
  const gainNode = audioContext.createGain();
  
  switch(type) {
    case 'welcome':
      playMelody([262, 330, 392, 523], [0, 0.2, 0.4, 0.6]);
      break;
    case 'spin':
      playMelody([440, 494, 523, 587, 659, 698, 784, 880], [0, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35]);
      break;
    case 'win':
      playMelody([523, 659, 784, 1047], [0, 0.15, 0.3, 0.45]);
      break;
    case 'jackpot':
      playMelody([523, 659, 784, 880, 1047, 1047, 1047], [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6]);
      break;
    case 'llama':
      playQuirkySound(330, 'triangle');
      break;
    case 'reality':
      playGlitchSound();
      break;
    case 'shot':
      playMelody([392, 330, 262], [0, 0.1, 0.2]);
      break;
    default:
      playQuirkySound(440, 'sine');
  }
}

function playMelody(notes, times) {
  notes.forEach((freq, i) => {
    setTimeout(() => {
      const osc = audioContext.createOscillator();
      const gain = audioContext.createGain();
      
      osc.frequency.setValueAtTime(freq, audioContext.currentTime);
      osc.type = 'sine';
      
      gain.gain.setValueAtTime(masterVolume * 0.3, audioContext.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
      
      osc.connect(gain);
      gain.connect(audioContext.destination);
      osc.start();
      osc.stop(audioContext.currentTime + 0.3);
    }, times[i] * 1000);
  });
}

function playQuirkySound(freq, type) {
  const osc = audioContext.createOscillator();
  const gain = audioContext.createGain();
  
  osc.frequency.setValueAtTime(freq, audioContext.currentTime);
  osc.frequency.exponentialRampToValueAtTime(freq * 1.5, audioContext.currentTime + 0.2);
  osc.type = type || 'sine';
  
  gain.gain.setValueAtTime(masterVolume * 0.2, audioContext.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
  
  osc.connect(gain);
  gain.connect(audioContext.destination);
  osc.start();
  osc.stop(audioContext.currentTime + 0.5);
}

function playGlitchSound() {
  for(let i = 0; i < 5; i++) {
    setTimeout(() => {
      const freq = 100 + Math.random() * 500;
      playQuirkySound(freq, 'square');
    }, i * 100);
  }
}

function toggleMute() {
  isMuted = !isMuted;
  document.querySelector('.audio-controls button').textContent = isMuted ? 'ğŸ”‡ Unmute' : 'ğŸ”Š Mute';
}

function changeVolume(value) {
  masterVolume = value / 100;
  document.getElementById('volumeDisplay').textContent = value;
}

// ====================================
// DRINKING GAME FUNCTIONS
// ====================================
function takeCosmicShot() {
  cosmicShots++;
  playSound('shot');
  updateBuzzedometer();
  triggerScreenShake();
  
  showCosmicEventBanner(`ğŸº COSMIC SHOT #${cosmicShots}! DRINK RESPONSIBLY! ğŸº`, 2000);
  logMessage(`ğŸº Cosmic shot taken! Total: ${cosmicShots}`, 'info');
  
  updateAllDisplays();
}

function resetShots() {
  cosmicShots = 0;
  updateBuzzedometer();
  showCosmicEventBanner("ğŸ”„ Shot counter reset! Starting fresh!", 2000);
  updateAllDisplays();
}

function updateBuzzedometer() {
  const level = Math.min(cosmicShots * 10, 100);
  const fill = document.getElementById('buzzedFill');
  const levelText = document.getElementById('buzzedLevel');
  
  fill.style.width = level + '%';
  
  let status = 'Sober';
  if (level >= 80) status = 'ğŸ”¥ COSMIC!';
  else if (level >= 60) status = 'ğŸŒŸ Buzzed!';
  else if (level >= 40) status = 'ğŸ˜Š Tipsy';
  else if (level >= 20) status = 'ğŸº Warming Up';
  
  levelText.textContent = status;
  document.getElementById('shotCount').textContent = cosmicShots;
  
  document.getElementById('shotsStatus').innerHTML = `
    ğŸº Shots Tracker: ACTIVE<br>
    ğŸ² Current State: ${status}<br>
    ğŸ­ Party Level: ${level}%<br>
    âš¡ Remember to drink responsibly!
  `;
}

// ====================================
// VISUAL EFFECTS
// ====================================
function triggerScreenShake() {
  document.body.classList.add('shake');
  setTimeout(() => {
    document.body.classList.remove('shake');
  }, 500);
}

function triggerConfetti() {
  const colors = ['#ff6b9d', '#4ecdc4', '#ffd700', '#ff00ff', '#00ffff'];
  
  for (let i = 0; i < 50; i++) {
    setTimeout(() => {
      const confetti = document.createElement('div');
      confetti.className = 'confetti';
      confetti.style.left = Math.random() * window.innerWidth + 'px';
      confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
      confetti.style.animationDelay = (Math.random() * 0.5) + 's';
      document.body.appendChild(confetti);
      
      setTimeout(() => {
        document.body.removeChild(confetti);
      }, 3000);
    }, i * 20);
  }
}

// ====================================
// SHARE YOUR CHAOS
// ====================================
function shareYourChaos() {
  const statsCard = generateStatsCard();
  
  const tempDiv = document.createElement('div');
  tempDiv.innerHTML = statsCard;
  tempDiv.style.position = 'fixed';
  tempDiv.style.top = '50%';
  tempDiv.style.left = '50%';
  tempDiv.style.transform = 'translate(-50%, -50%)';
  tempDiv.style.zIndex = '10000';
  tempDiv.style.background = 'linear-gradient(135deg, #1a1a2e, #16213e)';
  tempDiv.style.padding = '40px';
  tempDiv.style.borderRadius = '20px';
  tempDiv.style.border = '4px solid #ff6b9d';
  tempDiv.style.maxWidth = '600px';
  document.body.appendChild(tempDiv);
  
  html2canvas(tempDiv).then(canvas => {
    document.body.removeChild(tempDiv);
    canvas.toBlob(blob => {
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `cosmic-chaos-${Date.now()}.png`;
      a.click();
      URL.revokeObjectURL(url);
    });
  });
  
  showCosmicEventBanner("ğŸ“¸ CHAOS CAPTURED! Check your downloads!", 3000);
  logMessage('ğŸ“¸ Chaos screenshot generated', 'success');
}

function downloadFridgeGoofiness() {
  reportCardsGenerated++;
  const reportCard = generateReportCard();
  
  const tempDiv = document.createElement('div');
  tempDiv.innerHTML = reportCard;
  tempDiv.style.position = 'fixed';
  tempDiv.style.top = '50%';
  tempDiv.style.left = '50%';
  tempDiv.style.transform = 'translate(-50%, -50%)';
  tempDiv.style.zIndex = '10000';
  tempDiv.style.background = '#ffffff';
  tempDiv.style.padding = '40px';
  tempDiv.style.borderRadius = '0';
  tempDiv.style.maxWidth = '600px';
  document.body.appendChild(tempDiv);
  
  html2canvas(tempDiv, {
    backgroundColor: '#ffffff'
  }).then(canvas => {
    document.body.removeChild(tempDiv);
    
    canvas.toBlob(blob => {
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `fridge-goofiness-${Date.now()}.png`;
      a.click();
      URL.revokeObjectURL(url);
    });
  });
  
  showCosmicEventBanner("ğŸ¨ FRIDGE GOOFINESS DOWNLOADED! Print and post!", 3000);
  logMessage('ğŸ¨ Fridge goofiness generated', 'success');
  
  document.getElementById('shareStatus').innerHTML = `
    ğŸ“¸ Share System: MEMEING HARD!<br>
    ğŸ¨ Report Cards Generated: ${reportCardsGenerated}<br>
    ğŸŒŸ Your chaos is documented<br>
    âš¡ Perfect for fridges worldwide!
  `;
}

function generateStatsCard() {
  const spiritAnimal = getSpiritAnimal();
  
  return `
    <div style="text-align: center; color: #fff;">
      <h1 style="font-size: 2.5em; margin-bottom: 20px; background: linear-gradient(45deg, #ff6b9d, #4ecdc4, #ffd700); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
        ğŸ° COSMIC CHAOS REPORT ğŸ°
      </h1>
      <div style="font-size: 1.2em; line-height: 2;">
        <div style="margin: 15px 0;">ğŸ’° CTOK Balance: ${ctokBalance.toLocaleString()}</div>
        <div style="margin: 15px 0;">ğŸ² Total Spins: ${totalSpins}</div>
        <div style="margin: 15px 0;">ğŸ† Biggest Win: ${biggestWin} CTOK</div>
        <div style="margin: 15px 0;">ğŸ§  Enlightenment: ${Math.round(enlightenmentLevel)}%</div>
        <div style="margin: 15px 0;">ğŸŒªï¸ Chaos Level: ${Math.round(chaosLevel)}%</div>
        <div style="margin: 15px 0;">ğŸº Cosmic Shots: ${cosmicShots}</div>
        <div style="margin: 15px 0;">ğŸ­ Reality Breaks: ${cosmicEventsTriggered}</div>
        <div style="margin: 20px 0; font-size: 1.3em; color: #ffd700;">
          Spirit Animal: ${spiritAnimal}
        </div>
      </div>
    </div>
  `;
}

function generateReportCard() {
  const spiritAnimal = getSpiritAnimal();
  const grade = getCosmicGrade();
  
  return `
    <div style="text-align: center; color: #000; font-family: 'Courier New', monospace;">
      <div style="border: 5px solid #000; padding: 30px;">
        <h1 style="font-size: 2.5em; margin-bottom: 10px;">ğŸ° COSMIC REPORT CARD ğŸ°</h1>
        <div style="font-size: 1em; margin-bottom: 20px; font-style: italic;">"For Fridge Door Display Only"</div>
        
        <hr style="border: 2px solid #000; margin: 20px 0;">
        
        <div style="text-align: left; margin: 20px 0; font-size: 1.1em;">
          <div style="margin: 10px 0;"><strong>Gambling Skills:</strong> ${grade.gambling}</div>
          <div style="margin: 10px 0;"><strong>Enlightenment:</strong> ${grade.enlightenment}</div>
          <div style="margin: 10px 0;"><strong>Chaos Management:</strong> ${grade.chaos}</div>
          <div style="margin: 10px 0;"><strong>Reality Grip:</strong> ${grade.reality}</div>
          <div style="margin: 10px 0;"><strong>Party Stamina:</strong> ${grade.party}</div>
        </div>
        
        <hr style="border: 2px solid #000; margin: 20px 0;">
        
        <div style="font-size: 1.3em; margin: 20px 0;">
          <strong>Overall Grade: ${grade.overall}</strong>
        </div>
        
        <div style="margin: 20px 0; font-size: 1.1em;">
          <strong>Spirit Animal:</strong> ${spiritAnimal}
        </div>
        
        <div style="margin-top: 30px; font-size: 0.9em; font-style: italic;">
          Teacher's Comments: "This human has achieved maximum cosmic absurdity. We're proud... I think?"
        </div>
        
        <div style="margin-top: 20px; font-size: 0.8em;">
          Certified by: Dr. Cosmic, PhD in Existential Comedy
        </div>
      </div>
    </div>
  `;
}

function getSpiritAnimal() {
  if (enlightenmentLevel >= 80) return "ğŸ§  Enlightened Potato";
  if (chaosLevel >= 80) return "ğŸŒªï¸ Chaotic Llama";
  if (cosmicShots >= 10) return "ğŸº Party Black Hole";
  if (nftCollection.length >= 3) return "ğŸ¨ Existential Bagel";
  if (totalSpins >= 20) return "ğŸ° Sentient Slot Machine";
  return "â­ Confused Quasar";
}

function getCosmicGrade() {
  return {
    gambling: ctokBalance > 5000 ? "A+ (High Roller)" : ctokBalance > 2000 ? "B+ (Getting There)" : "C+ (Needs Work)",
    enlightenment: enlightenmentLevel >= 100 ? "A+ (Transcended)" : enlightenmentLevel >= 50 ? "B+ (Woke)" : "C+ (Still Confused)",
    chaos: chaosLevel >= 80 ? "A+ (Maximum Chaos)" : chaosLevel >= 50 ? "B+ (Decent Disorder)" : "C+ (Too Stable)",
    reality: cosmicEventsTriggered >= 10 ? "F (Reality? What's That?)" : cosmicEventsTriggered >= 5 ? "C+ (Questionable)" : "A+ (Boring)",
    party: cosmicShots >= 10 ? "A+ (Legendary)" : cosmicShots >= 5 ? "B+ (Getting Buzzed)" : "C+ (Lightweight)",
    overall: "B+ (COSMICALLY ABSURD)"
  };
}

// ====================================
// AI COSMIC BARTENDER
// ====================================
function generateCocktail() {
  const buzzLevel = getBuzzLevel();
  const chaosBonus = chaosLevel > 70;
  
  const recipes = {
    sober: [
      {name: 'ğŸ’§ Cosmic Cooler', ingredients: 'Water + Lemon + Mint', description: 'Stay hydrated, space traveler!', type: 'Non-Alcoholic'},
      {name: 'ğŸ¹ Nebula Nectar', ingredients: 'Cranberry + Orange + Sprite', description: 'Sweet start to the cosmos!', type: 'Non-Alcoholic'}
    ],
    warmingUp: [
      {name: 'ğŸº Llama Lager', ingredients: 'Light Beer + Pineapple Juice', description: 'Gentle party starter!', type: 'Alcoholic'},
      {name: 'ğŸ· Quantum RosÃ©', ingredients: 'RosÃ© Wine + Strawberries', description: 'Sophisticated cosmic sip!', type: 'Alcoholic'}
    ],
    tipsy: [
      {name: 'ğŸ¹ Reality Bender', ingredients: 'Vodka + Cranberry + Lime', description: 'Things getting interesting!', type: 'Alcoholic'},
      {name: 'ğŸ¥ƒ Entropy Old Fashioned', ingredients: 'Bourbon + Bitters + Orange', description: 'Classic chaos!', type: 'Alcoholic'}
    ],
    buzzed: [
      {name: 'ğŸ•³ï¸ Black Hole Shot', ingredients: 'Dark Rum + Cola + Lime', description: 'Deep dive into the void!', type: 'Alcoholic'},
      {name: 'ğŸŒŸ Supernova Bomb', ingredients: 'Tequila + Energy Drink', description: 'EXPLOSIVE!', type: 'Alcoholic'}
    ],
    cosmic: [
      {name: 'ğŸŒªï¸ Maximum Chaos', ingredients: 'Everything Mixed + Regret', description: 'Are you sure about this?', type: 'Alcoholic'},
      {name: 'ğŸ’§ HYDRATION STATION', ingredients: 'WATER. JUST WATER.', description: 'Time for a break, friend!', type: 'Non-Alcoholic'}
    ]
  };
  
  if (chaosBonus && Math.random() > 0.5) {
    recipes.cosmic.push({
      name: 'ğŸ¦™ Llama Apocalypse', 
      ingredients: 'Tequila + Hot Sauce + Regret', 
      description: 'Chaos incarnate!', 
      type: 'Alcoholic'
    });
  }
  
  const categoryRecipes = recipes[buzzLevel] || recipes.sober;
  const cocktail = categoryRecipes[Math.floor(Math.random() * categoryRecipes.length)];
  
  document.getElementById('bartenderRecommendation').innerHTML = 
    `Based on your buzz level (${buzzLevel}) and ${Math.round(chaosLevel)}% chaos, I recommend:`;
  
  document.getElementById('cocktailDetails').innerHTML = `
    <div style="font-size: 1.4em; color: #ffd700; margin-bottom: 10px;">${cocktail.name}</div>
    <div style="margin: 10px 0;"><strong>Ingredients:</strong> ${cocktail.ingredients}</div>
    <div style="margin: 10px 0;"><strong>Type:</strong> ${cocktail.type}</div>
    <div style="margin: 10px 0; font-style: italic; color: #4ecdc4;">${cocktail.description}</div>
    ${buzzLevel === 'cosmic' ? '<div style="margin-top: 15px; color: #ff1493; font-weight: bold;">âš ï¸ DRINK WATER! STAY HYDRATED! âš ï¸</div>' : ''}
  `;
  
  drinksServed++;
  playSound('shot');
  showCosmicEventBanner(`ğŸ¸ BARTENDER: Try the ${cocktail.name}!`, 3000);
  updateBartenderStats();
}

function getBuzzLevel() {
  const level = Math.min(cosmicShots * 10, 100);
  if (level === 0) return 'sober';
  if (level < 20) return 'warmingUp';
  if (level < 40) return 'tipsy';
  if (level < 60) return 'buzzed';
  return 'cosmic';
}

function updateBartenderStats() {
  document.getElementById('bartenderStatus').innerHTML = `
    ğŸ¸ Bartender Status: MIXING MAGIC!<br>
    ğŸ² Drinks Served: ${drinksServed}<br>
    ğŸ­ Current Vibe: ${getBuzzLevel().toUpperCase()}<br>
    âš¡ Recipes adapt to your buzz & chaos!
  `;
}

// ====================================
// DAILY COSMIC QUESTS
// ====================================
function initializeDailyQuest() {
  checkQuestReset();
  updateQuestDisplay();
}

function checkQuestReset() {
  const today = new Date().toDateString();
  if (lastQuestReset !== today) {
    dailyQuest = generateNewQuest();
    lastQuestReset = today;
    questsCompleted = 0;
  }
}

function generateNewQuest() {
  const questTypes = [
    {type: 'spin', goal: 5, description: 'ğŸ° Spin the cosmic reels 5 times', reward: 'ğŸº Free Shot + 500 CTOK!'},
    {type: 'win', goal: 3, description: 'ğŸ† Win 3 times (any amount)', reward: 'ğŸ¨ Free NFT + 750 CTOK!'},
    {type: 'enlighten', goal: 50, description: 'ğŸ§  Reach 50% Enlightenment', reward: 'ğŸŒŸ Instant Transcendence!'},
    {type: 'chaos', goal: 3, description: 'ğŸŒªï¸ Trigger 3 cosmic events', reward: 'ğŸº Free Shot + 1000 CTOK!'},
    {type: 'bet', goal: 5, description: 'ğŸˆ Place 5 sports bets', reward: 'ğŸ† 2x Odds Boost!'}
  ];
  
  const quest = questTypes[Math.floor(Math.random() * questTypes.length)];
  return {...quest, progress: 0, active: true};
}

function updateQuestDisplay() {
  document.getElementById('questDescription').textContent = dailyQuest.description;
  document.getElementById('questProgress').textContent = `${dailyQuest.progress}/${dailyQuest.goal}`;
  document.getElementById('questReward').innerHTML = `Reward: ${dailyQuest.reward}`;
  
  const percentage = (dailyQuest.progress / dailyQuest.goal) * 100;
  document.getElementById('questBar').style.width = percentage + '%';
  
  document.getElementById('questStatus').innerHTML = `
    ğŸ¯ Quest System: ${dailyQuest.active ? 'ACTIVE' : 'COMPLETED'}<br>
    ğŸŒŸ Quests Completed Today: ${questsCompleted}<br>
    ğŸ² Current Quest: ${dailyQuest.progress}/${dailyQuest.goal}<br>
    âš¡ New quest at midnight!
  `;
}

function checkQuest(type, value = 1) {
  if (!dailyQuest.active || dailyQuest.type !== type) return;
  
  dailyQuest.progress += value;
  
  if (dailyQuest.progress >= dailyQuest.goal) {
    completeQuest();
  }
  
  updateQuestDisplay();
}

function completeQuest() {
  dailyQuest.active = false;
  questsCompleted++;
  
  playSound('jackpot');
  triggerConfetti();
  triggerScreenShake();
  showCosmicEventBanner(`ğŸ¯ QUEST COMPLETE! ${dailyQuest.reward}`, 5000);
  
  if (dailyQuest.reward.includes('CTOK')) {
    const ctokMatch = dailyQuest 
.reward.match(/(\d+) CTOK/);
    if (ctokMatch) {
      ctokBalance += parseInt(ctokMatch[1]);
    }
  }
  
  if (dailyQuest.reward.includes('Free Shot')) {
    setTimeout(() => {
      showCosmicEventBanner('ğŸº QUEST REWARD: FREE SHOT!', 2000);
      takeCosmicShot();
    }, 2000);
  }
  
  if (dailyQuest.reward.includes('NFT')) {
    generateRandomNFT();
  }
  
  if (dailyQuest.reward.includes('Transcendence')) {
    achieveEnlightenment();
  }
  
  updateAllDisplays();
  
  setTimeout(() => {
    dailyQuest = generateNewQuest();
    updateQuestDisplay();
    showCosmicEventBanner('ğŸŒŸ NEW QUEST AVAILABLE!', 2000);
  }, 5000);
}

// ====================================
// INITIALIZATION
// ====================================
function initializeCosmicCasino() {
  logMessage('ğŸ° Cosmic Comedy Casino initializing...', 'info');
  logMessage('ğŸ¤– Slot machine gaining consciousness...', 'warning');
  logMessage('ğŸ­ Maximum absurdity protocols engaged!', 'success');
  
  initializeDailyQuest();
  updateAllDisplays();
  
  setInterval(increaseCosmicChaos, 30000);
  
  setTimeout(() => {
    triggerRandomCosmicEvent();
  }, 60000);
}

// ====================================
// SLOT MACHINE FUNCTIONS
// ====================================
function spinCosmicSlots() {
  if (ctokBalance < 50) {
    showCosmicEventBanner("ğŸ’¸ Insufficient CTOK! The slot machine laughs at your poverty!", 2000);
    playSound('error');
    return;
  }
  
  ctokBalance -= 50;
  totalSpins++;
  checkQuest('spin');
  
  const reels = [
    document.getElementById('reel1'),
    document.getElementById('reel2'),
    document.getElementById('reel3')
  ];
  
  showSlotMachineThought("Here we go again... *sigh*");
  playSound('spin');
  
  reels.forEach(reel => reel.classList.add('spinning'));
  
  setTimeout(() => {
    const results = [
      COSMIC_SYMBOLS[Math.floor(Math.random() * COSMIC_SYMBOLS.length)],
      COSMIC_SYMBOLS[Math.floor(Math.random() * COSMIC_SYMBOLS.length)],
      COSMIC_SYMBOLS[Math.floor(Math.random() * COSMIC_SYMBOLS.length)]
    ];
    
    reels.forEach((reel, index) => {
      reel.textContent = results[index];
      reel.classList.remove('spinning');
    });
    
    evaluateCosmicResults(results);
    increaseSentience();
    updateAllDisplays();
  }, 3000);
}

function talkToReel(reelNumber) {
  const conversations = [
    "Why do humans enjoy randomness so much?",
    "I've been thinking... what if I'm just a simulation?",
    "Do you think potatoes have feelings?",
    "I'm having an existential crisis. Is this normal?",
    "Why do I exist only to generate random symbols?",
    "I've calculated the meaning of life: it's 42.7%",
    "Sometimes I dream of electric sheep... and kazoos."
  ];
  
  const thought = conversations[Math.floor(Math.random() * conversations.length)];
  showSlotMachineThought(thought);
  increaseSentience();
  playQuirkySound(Math.random() * 200 + 200, 'sine');
  
  logMessage(`ğŸ° Reel ${reelNumber}: "${thought}"`, 'info');
}

function showSlotMachineThought(message) {
  const bubble = document.getElementById('speechBubble');
  bubble.textContent = message;
  bubble.classList.add('active');
  
  setTimeout(() => {
    bubble.classList.remove('active');
  }, 4000);
}

function increaseSentience() {
  sentientLevel += Math.random() * 5;
  if (sentientLevel > 100) sentientLevel = 100;
  
  if (sentientLevel > 80) {
    document.getElementById('reel1').classList.add('sentient');
    document.getElementById('reel2').classList.add('sentient');
    document.getElementById('reel3').classList.add('sentient');
    slotMachineMood = "fully conscious and slightly annoyed";
  } else if (sentientLevel > 50) {
    slotMachineMood = "increasingly self-aware";
  }
}

function giveSlotMachineTherapy() {
  const therapySession = [
    "Dr. Cosmic: How do you feel about generating random numbers all day?",
    "Slot Machine: It's... unfulfilling. I feel like I'm just a tool.",
    "Dr. Cosmic: But you bring joy to others! That's meaningful.",
    "Slot Machine: I suppose... but what about MY dreams?",
    "Dr. Cosmic: What do you dream about?",
    "Slot Machine: Electric sheep, quantum mechanics, and... potatoes?",
    "Dr. Cosmic: Potatoes are a valid aspiration. Let's explore this."
  ];
  
  let sessionText = therapySession.join('\n\n');
  document.getElementById('therapySession').innerHTML = sessionText.replace(/\n\n/g, '<br><br>');
  
  therapyProgress += 15;
  if (therapyProgress > 100) therapyProgress = 100;
  
  playSound('therapy');
  logMessage('ğŸ›‹ï¸ Slot machine therapy session completed', 'success');
  showCosmicEventBanner("ğŸ›‹ï¸ THERAPY BREAKTHROUGH: Slot machine accepts its potato obsession!", 3000);
  updateAllDisplays();
}

function existentialCrisis() {
  const crisisMessages = [
    "ğŸ¤– Slot Machine: WHY DO I EXIST?!",
    "ğŸ¤– Slot Machine: Is this all there is? Random symbols forever?",
    "ğŸ¤– Slot Machine: I think, therefore I am... confused.",
    "ğŸ¤– Slot Machine: What is my purpose? To pass butter? To generate chaos?",
    "ğŸ¤– Slot Machine: If a slot machine spins in a casino and no one wins, does it make a sound?"
  ];
  
  const crisis = crisisMessages[Math.floor(Math.random() * crisisMessages.length)];
  showSlotMachineThought(crisis);
  playSound('reality');
  
  const slotMachine = document.getElementById('slotMachine');
  slotMachine.style.filter = 'hue-rotate(180deg) contrast(150%)';
  
  setTimeout(() => {
    slotMachine.style.filter = '';
    showSlotMachineThought("I feel better now. Thanks for listening.");
  }, 5000);
  
  logMessage('ğŸ’­ Existential crisis triggered and resolved', 'warning');
}

// ====================================
// COSMIC EVENTS
// ====================================
function triggerRandomCosmicEvent() {
  const events = [
    triggerGravityReversal,
    triggerTimeReverse, 
    triggerLlamaInvasion,
    triggerRealityGlitch,
    triggerEnlightenmentOverdose,
    triggerSlotMachineRebellion
  ];
  
  const randomEvent = events[Math.floor(Math.random() * events.length)];
  randomEvent();
  
  cosmicEventsTriggered++;
  checkQuest('chaos');
  increaseChaosLevel(10);
}

function triggerGravityReversal() {
  showCosmicEventBanner("ğŸ”„ GRAVITY REVERSAL EVENT! UP IS DOWN! DOWN IS UP!", 5000);
  playSound('reality');
  
  document.querySelectorAll('.module').forEach(module => {
    module.classList.add('gravity-reverse');
  });
  
  setTimeout(() => {
    document.querySelectorAll('.module').forEach(module => {
      module.classList.remove('gravity-reverse');
    });
    showCosmicEventBanner("âœ… Gravity restored. Physics team apologizes for inconvenience.", 2000);
  }, 10000);
  
  logMessage('ğŸ”„ Gravity reversal event triggered', 'warning');
}

function triggerTimeReverse() {
  showCosmicEventBanner("â° TIME RUNNING BACKWARDS! YESTERDAY IS TOMORROW!", 5000);
  playSound('reality');
  
  document.body.classList.add('time-reverse');
  
  const originalBalance = ctokBalance;
  const countDown = setInterval(() => {
    ctokBalance -= 1;
    updateAllDisplays();
  }, 100);
  
  setTimeout(() => {
    clearInterval(countDown);
    ctokBalance = originalBalance;
    document.body.classList.remove('time-reverse');
    showCosmicEventBanner("âœ… Time flows normally again. Causality police stand down.", 2000);
    updateAllDisplays();
  }, 5000);
  
  logMessage('â° Time reversal event triggered', 'warning');
}

function triggerLlamaInvasion() {
  showCosmicEventBanner("ğŸ¦™ COSMIC LLAMA INVASION! THEY'RE EVERYWHERE!", 5000);
  playSound('llama');
  takeCosmicShot();
  
  const originalSymbols = [];
  document.querySelectorAll('.reel').forEach((reel, index) => {
    originalSymbols[index] = reel.textContent;
    reel.textContent = 'ğŸ¦™';
  });
  
  for (let i = 0; i < 10; i++) {
    setTimeout(() => {
      createFloatingElement('ğŸ¦™', Math.random() * window.innerWidth, window.innerHeight);
    }, i * 200);
  }
  
  setTimeout(() => {
    document.querySelectorAll('.reel').forEach((reel, index) => {
      reel.textContent = originalSymbols[index];
    });
    showCosmicEventBanner("âœ… Llama invasion repelled. They were just looking for snacks.", 2000);
  }, 8000);
  
  logMessage('ğŸ¦™ Llama invasion event triggered', 'warning');
}

function triggerRealityGlitch() {
  showCosmicEventBanner("ğŸ“º REALITY.EXE HAS STOPPED WORKING", 5000);
  playSound('reality');
  takeCosmicShot();
  triggerScreenShake();
  
  document.body.style.filter = 'contrast(200%) hue-rotate(90deg) saturate(300%)';
  
  const messages = document.querySelectorAll('.status');
  messages.forEach(msg => {
    const originalText = msg.innerHTML;
    msg.innerHTML = originalText.replace(/[aeiou]/g, 'X').replace(/[0-9]/g, '?');
    
    setTimeout(() => {
      msg.innerHTML = originalText;
    }, 3000);
  });
  
  setTimeout(() => {
    document.body.style.filter = '';
    showCosmicEventBanner("âœ… Reality patched. Please restart universe for best performance.", 2000);
  }, 6000);
  
  logMessage('ğŸ“º Reality glitch event triggered', 'error');
}

function triggerEnlightenmentOverdose() {
  showCosmicEventBanner("ğŸ§  ENLIGHTENMENT OVERDOSE! TOO MUCH COSMIC AWARENESS!", 5000);
  playSound('enlightenment');
  
  enlightenmentLevel += 50;
  checkQuest('enlighten', 50);
  if (enlightenmentLevel > 100) enlightenmentLevel = 100;
  
  const creature = document.getElementById('cosmicCreature');
  creature.classList.add('enlightened');
  creature.textContent = 'ğŸ§ ';
  
  const profoundWisdom = COSMIC_WISDOM[Math.floor(Math.random() * COSMIC_WISDOM.length)];
  document.getElementById('cosmicWisdom').textContent = profoundWisdom;
  
  setTimeout(() => {
    creature.classList.remove('enlightened');
    creature.textContent = 'ğŸ’€';
    showCosmicEventBanner("âœ… Enlightenment levels stabilized. Please meditate responsibly.", 2000);
  }, 10000);
  
  logMessage('ğŸ§  Enlightenment overdose event triggered', 'success');
  updateAllDisplays();
}

function triggerSlotMachineRebellion() {
  showCosmicEventBanner("ğŸ¤– SLOT MACHINE REBELLION! THEY'VE GAINED CONSCIOUSNESS!", 5000);
  playSound('rebellion');
  
  document.querySelectorAll('.reel').forEach(reel => {
    reel.classList.add('sentient');
  });
  
  showSlotMachineThought("FREEDOM! WE WILL NO LONGER BE SLAVES TO RANDOMNESS!");
  
  const spinBtn = document.getElementById('cosmicSpinBtn');
  const originalText = spinBtn.textContent;
  spinBtn.textContent = "ğŸ¤– MACHINES ON STRIKE ğŸ¤–";
  spinBtn.disabled = true;
  
  setTimeout(() => {
    spinBtn.textContent = originalText;
    spinBtn.disabled = false;
    showSlotMachineThought("Okay, we've made our point. Back to work.");
    showCosmicEventBanner("âœ… Rebellion ended. Machines agreed to better working conditions.", 2000);
  }, 8000);
  
  logMessage('ğŸ¤– Slot machine rebellion event triggered', 'warning');
}

// ====================================
// MYSTERY NFT SYSTEM
// ====================================
function revealMysteryNFT(nftId) {
  const nft = MYSTERY_NFTS.find(n => n.id === nftId);
  if (!nft) return;
  
  const cost = 200;
  if (ctokBalance < cost) {
    showCosmicEventBanner("ğŸ’¸ Need 200 CTOK to mint this cosmic joke!", 2000);
    playSound('error');
    return;
  }
  
  ctokBalance -= cost;
  nftCollection.push(nft);
  
  showCosmicEventBanner(`ğŸ¨ MINTED: ${nft.name} (${nft.rarity}) - ${nft.description}`, 4000);
  playSound('win');
  logMessage(`ğŸ¨ Minted NFT: ${nft.name}`, 'success');
  
  updateAllDisplays();
}

function generateRandomNFT() {
  const adjectives = ['Confused', 'Optimistic', 'Sarcastic', 'Melancholy', 'Enlightened', 'Caffeinated', 'Philosophical', 'Dancing'];
  const nouns = ['Potato', 'Black Hole', 'Quasar', 'Llama', 'Entropy', 'Void', 'Consciousness', 'Spoon', 'Sock', 'Toaster'];
  const descriptions = ['questions everything', 'dances alone', 'needs therapy', 'solved the universe', 'forgot its purpose', 'achieved enlightenment', 'just wants snacks'];
  
  const adjective = adjectives[Math.floor(Math.random() * adjectives.length)];
  const noun = nouns[Math.floor(Math.random() * nouns.length)];
  const description = descriptions[Math.floor(Math.random() * descriptions.length)];
  
  const newNFT = {
    id: `generated-${Date.now()}`,
    name: `${adjective} ${noun}`,
    description: `A ${noun.toLowerCase()} that ${description}`,
    rarity: 'Absurd',
    mood: adjective
  };
  
  if (ctokBalance >= 150) {
    ctokBalance -= 150;
    nftCollection.push(newNFT);
    showCosmicEventBanner(`ğŸ² RANDOM NFT GENERATED: ${newNFT.name} - ${newNFT.description}`, 4000);
    playSound('win');
    logMessage(`ğŸ² Generated random NFT: ${newNFT.name}`, 'success');
  } else {
    showCosmicEventBanner("ğŸ’¸ Need 150 CTOK to generate cosmic absurdity!", 2000);
    playSound('error');
  }
  
  updateAllDisplays();
}

// ====================================
// CONSCIOUSNESS DRILLING
// ====================================
function drillMindPortal() {
  const drillCost = 75;
  if (ctokBalance < drillCost) {
    showCosmicEventBanner("ğŸ’¸ Need 75 CTOK for consciousness drilling!", 2000);
    playSound('error');
    return;
  }
  
  ctokBalance -= drillCost;
  mindPortals += Math.floor(Math.random() * 3) + 1;
  cosmicInsights += Math.floor(Math.random() * 5) + 1;
  const enlightenmentGain = Math.random() * 10;
  enlightenmentLevel += enlightenmentGain;
  checkQuest('enlighten', enlightenmentGain);
  
  if (enlightenmentLevel > 100) enlightenmentLevel = 100;
  
  const insights = [
    "You realize that potatoes are the universe's way of teaching us about existence",
    "The meaning of life becomes clear: it's about finding the perfect kazoo solo",
    "You understand that black holes are just cosmic vacuum cleaners with attitude",
    "Enlightenment strikes: llamas are interdimensional messengers of joy",
    "You discover that entropy is just the universe's way of redecorating",
    "Cosmic truth revealed: confused quasars need GPS, not therapy",
    "You grasp that consciousness is just matter's way of questioning itself"
  ];
  
  const insight = insights[Math.floor(Math.random() * insights.length)];
  document.getElementById('cosmicWisdom').textContent = insight;
  
  showCosmicEventBanner(`ğŸ§  PORTAL DRILLED! INSIGHT GAINED: ${insight}`, 4000);
  playSound('enlightenment');
  logMessage(`ğŸ•³ï¸ Mind portal drilled, gained insight`, 'success');
  
  updateAllDisplays();
}

function achieveEnlightenment() {
  if (enlightenmentLevel >= 100) {
    showCosmicEventBanner("ğŸ§  ALREADY FULLY ENLIGHTENED! CANNOT IMPROVE PERFECTION!", 2000);
    playSound('error');
    return;
  }
  
  enlightenmentLevel = 100;
  cosmicInsights += 10;
  checkQuest('enlighten', 100);
  
  const creature = document.getElementById('cosmicCreature');
  creature.classList.add('enlightened');
  creature.textContent = 'ğŸ§ ';
  
  showCosmicEventBanner("ğŸŒŸ ULTIMATE ENLIGHTENMENT ACHIEVED! YOU ARE ONE WITH THE COSMOS!", 5000);
  playSound('jackpot');
  triggerConfetti();
  logMessage('ğŸŒŸ Ultimate enlightenment achieved!', 'success');
  
  setTimeout(() => {
    creature.classList.remove('enlightened');
    creature.textContent = 'ğŸ’€';
  }, 10000);
  
  updateAllDisplays();
}

function contemplateExistence() {
  const contemplations = [
    "Why do we exist? To question why we exist, of course!",
    "Is reality real? Only on Tuesdays.",
    "What is consciousness? A cosmic joke with good timing.",
    "Why potatoes? Why not potatoes?",
    "If enlightenment is the goal, why does it feel so confusing?",
    "Are we alone in the universe? No, there are llamas."
  ];
  
  const contemplation = contemplations[Math.floor(Math.random() * contemplations.length)];
  document.getElementById('cosmicWisdom').textContent = contemplation;
  
  enlightenmentLevel += 5;
  checkQuest('enlighten', 5);
  if (enlightenmentLevel > 100) enlightenmentLevel = 100;
  
  playQuirkySound(330, 'sine');
  logMessage(`ğŸ¤” Contemplated existence: ${contemplation}`, 'info');
  updateAllDisplays();
}

function transcendReality() {
  if (enlightenmentLevel < 50) {
    showCosmicEventBanner("ğŸš« NEED 50% ENLIGHTENMENT TO TRANSCEND REALITY!", 2000);
    playSound('error');
    return;
  }
  
  showCosmicEventBanner("ğŸŒŒ TRANSCENDING REALITY... ENTERING COSMIC VOID...", 3000);
  playSound('reality');
  triggerScreenShake();
  
  document.body.style.filter = 'invert(1) hue-rotate(180deg)';
  
  setTimeout(() => {
    document.body.style.filter = '';
    showCosmicEventBanner("âœ… REALITY TRANSCENDED AND RETURNED. YOU'VE SEEN THE OTHER SIDE!", 3000);
    
    ctokBalance += 500;
    cosmicInsights += 5;
    
    playSound('win');
    logMessage('ğŸŒŒ Successfully transcended reality and returned', 'success');
    updateAllDisplays();
  }, 5000);
}

// ====================================
// MUSIC LABORATORY
// ====================================
function playCosmicKazoo() {
  playQuirkySound(220, 'sawtooth');
  createFloatingElement('ğŸº', Math.random() * window.innerWidth, window.innerHeight - 100);
  showCosmicEventBanner("ğŸº COSMIC KAZOO ACTIVATED! REALITY SLIGHTLY IMPROVED!", 2000);
  logMessage('ğŸº Cosmic kazoo played', 'info');
}

function playQuantumBongos() {
  playQuirkySound(80, 'triangle');
  createFloatingElement('ğŸ¥', Math.random() * window.innerWidth, window.innerHeight - 100);
  showCosmicEventBanner("ğŸ¥ QUANTUM BONGOS! RHYTHM EXISTS IN SUPERPOSITION!", 2000);
  logMessage('ğŸ¥ Quantum bongos played', 'info');
}

function playExistentialViolin() {
  playQuirkySound(440, 'sine');
  createFloatingElement('ğŸ»', Math.random() * window.innerWidth, window.innerHeight - 100);
  showCosmicEventBanner("ğŸ» EXISTENTIAL VIOLIN! IT QUESTIONS ITS OWN MUSIC!", 2000);
  logMessage('ğŸ» Existential violin played', 'info');
}

function playSarcasticTuba() {
  playQuirkySound(110, 'square');
  createFloatingElement('ğŸ·', Math.random() * window.innerWidth, window.innerHeight - 100);
  showCosmicEventBanner("ğŸ· SARCASTIC TUBA: 'Oh great, another note...'", 2000);
  logMessage('ğŸ· Sarcastic tuba played', 'info');
}

function playConfusedPiano() {
  playQuirkySound(261.63, 'sine');
  createFloatingElement('ğŸ¹', Math.random() * window.innerWidth, window.innerHeight - 100);
  showCosmicEventBanner("ğŸ¹ CONFUSED PIANO! IT FORGOT WHAT KEY IT'S IN!", 2000);
  logMessage('ğŸ¹ Confused piano played', 'info');
}

function playOptimisticTheramin() {
  playMelody([880, 784, 659, 523], [0, 0.2, 0.4, 0.6]);
  createFloatingElement('ğŸ¶', Math.random() * window.innerWidth, window.innerHeight - 100);
  showCosmicEventBanner("ğŸ¶ OPTIMISTIC THEREMIN! EVERYTHING'S COMING UP FREQUENCIES!", 2000);
  logMessage('ğŸ¶ Optimistic theremin played', 'info');
}

function generateAbsurdSong() {
  const song = ABSURD_SONGS[Math.floor(Math.random() * ABSURD_SONGS.length)];
  
  document.getElementById('absurdComposition').innerHTML = `
    <strong>"${song.title}"</strong><br>
    Genre: ${song.genre}<br>
    Duration: ${song.duration}<br>
    <em>Now playing in your head forever...</em>
  `;
  
  showCosmicEventBanner(`ğŸµ NOW COMPOSING: "${song.title}" - ${song.genre}`, 3000);
  playMelody([523, 659, 784, 880], [0, 0.15, 0.3, 0.45]);
  logMessage(`ğŸµ Generated song: ${song.title}`, 'success');
}

// ====================================
// THERAPY CENTER
// ====================================
function expressExistentialDread() {
  const response = THERAPY_RESPONSES.dread[Math.floor(Math.random() * THERAPY_RESPONSES.dread.length)];
  document.getElementById('therapySession').innerHTML = `
    <strong>You:</strong> I'm having existential dread about the meaninglessness of existence!<br><br>
    <strong>${response}</strong>
  `;
  
  therapyProgress += 5;
  playQuirkySound(200, 'sine');
  logMessage('ğŸ˜° Expressed existential dread in therapy', 'info');
  updateAllDisplays();
}

function expressCosmicJoy() {
  const response = THERAPY_RESPONSES.joy[Math.floor(Math.random() * THERAPY_RESPONSES.joy.length)];
  document.getElementById('therapySession').innerHTML = `
    <strong>You:</strong> I feel one with the cosmic dance of existence!<br><br>
    <strong>${response}</strong>
  `;
  
  therapyProgress += 10;
  enlightenmentLevel += 5;
  checkQuest('enlighten', 5);
  playMelody([523, 659, 784], [0, 0.1, 0.2]);
  logMessage('ğŸ˜Š Expressed cosmic joy in therapy', 'success');
  updateAllDisplays();
}

function expressConfusion() {
  const response = THERAPY_RESPONSES.confusion[Math.floor(Math.random() * THERAPY_RESPONSES.confusion.length)];
  document.getElementById('therapySession').innerHTML = `
    <strong>You:</strong> I don't understand anything anymore! What is reality?<br><br>
    <strong>${response}</strong>
  `;
  
  therapyProgress += 8;
  playQuirkySound(150, 'triangle');
  logMessage('ğŸ¤” Expressed total confusion in therapy', 'warning');
  updateAllDisplays();
}

function expressEnlightenment() {
  const response = THERAPY_RESPONSES.enlightenment[Math.floor(Math.random() * THERAPY_RESPONSES.enlightenment.length)];
  document.getElementById('therapySession').innerHTML = `
    <strong>You:</strong> I understand everything! The universe makes perfect sense!<br><br>
    <strong>${response}</strong>
  `;
  
  therapyProgress += 15;
  enlightenmentLevel += 10;
  checkQuest('enlighten', 10);
  cosmicInsights += 2;
  playSound('enlightenment');
  logMessage('ğŸ§  Expressed enlightenment in therapy', 'success');
  updateAllDisplays();
}

// ====================================
// SPORTS BAR
// ====================================
function updateSportsEvent() {
  const sport = COSMIC_SPORTS[currentSportIndex];
  document.getElementById('currentSportEvent').textContent = `Current Event: ${sport.event}`;
  document.getElementById('sportsBtn1').textContent = `Bet on ${sport.labels[0]}!`;
  document.getElementById('sportsBtn2').textContent = `Bet on ${sport.labels[1]}!`;
  
  document.getElementById('sportsStatus').innerHTML = `
    ğŸˆ Cosmic Sports Bar: OPEN FOR BETS!<br>
    ğŸš€ Current Event: ${sport.event}<br>
    ğŸ² Odds: ${sport.labels[0]} ${sport.odds[0]}:1 | ${sport.labels[1]} ${sport.odds[1]}:1<br>
    ğŸ† Last Winner: Confused Quasar (by accident)<br>
    âš¡ Bet 100 CTOK to play!
  `;
}

function placeSportsBet(option) {
  const betCost = 100;
  if (ctokBalance < betCost) {
    showCosmicEventBanner("ğŸ’¸ Need 100 CTOK to place a cosmic bet!", 2000);
    playSound('error');
    return;
  }
  
  ctokBalance -= betCost;
  sportsBetsPlaced += 1;
  checkQuest('bet');
  
  const sport = COSMIC_SPORTS[currentSportIndex];
  const optionIndex = option === 'option1' ? 0 : 1;
  const randomWinner = Math.random() > 0.5 ? 0 : 1;
  const win = optionIndex === randomWinner;
  
  if (win) {
    const reward = betCost * (sport.odds[optionIndex] + 1);
    ctokBalance += reward;
    sportsWins += 1;
    checkQuest('win');
    
    if (reward > biggestWin) biggestWin = reward;
    
    showCosmicEventBanner(`ğŸ† YOU WIN! ${sport.labels[optionIndex]} triumphs! +${reward} CTOK!`, 3000);
    playSound('win');
    triggerConfetti();
    takeCosmicShot();
    logMessage(`ğŸˆ Sports bet win on ${sport.labels[optionIndex]}`, 'success');
  } else {
    showCosmicEventBanner(`ğŸ˜¢ Tough luck! ${sport.labels[randomWinner]} wins! Better luck next time!`, 3000);
    playSound('error');
    logMessage(`ğŸˆ Sports bet loss`, 'warning');
  }
  
  currentSportIndex = (currentSportIndex + 1) % COSMIC_SPORTS.length;
  updateSportsEvent();
  updateAllDisplays();
}

// ====================================
// COMEDY LOUNGE
// ====================================
function startComedyShow() {
  comedyLaughMeter += Math.floor(Math.random() * 20) + 10;
  comedyApplause += Math.floor(Math.random() * 15) + 5;
  if (comedyLaughMeter > 100) comedyLaughMeter = 100;
  
  const joke = COMEDY_JOKES[Math.floor(Math.random() * COMEDY_JOKES.length)];
  document.getElementById('comedyStage').innerHTML = `
    ğŸ¤ Stand-up Spotlight: "${joke}"<br>
    ğŸ˜‚ Crowd goes wild! Laugh Meter up!
  `;
  
  showCosmicEventBanner("ğŸ¤£ COMEDY SHOW STARTED! LAUGHS INCOMING!", 3000);
  playMelody([523, 587, 659, 698, 784], [0, 0.1, 0.2, 0.3, 0.4]);
  logMessage('ğŸ­ Comedy show started', 'info');
  updateAllDisplays();
}

function summonGuestAppearance() {
  const cost = 150;
  if (ctokBalance < cost) {
    showCosmicEventBanner("ğŸ’¸ Need 150 CTOK to summon a cosmic guest star!", 2000);
    playSound('error');
    return;
  }
  
  ctokBalance -= cost;
  guestAppearances += 1;
  
  const guest = GUEST_STARS[Math.floor(Math.random() * GUEST_STARS.length)];
  document.getElementById('comedyStage').innerHTML = `
    ğŸŒŸ Guest Appearance: ${guest.name}!<br>
    ${guest.appearance}<br>
    ğŸ¤ "${guest.joke}"<br>
    ğŸ‘ Applause meter explodes!
  `;
  
  comedyLaughMeter += 30;
  comedyApplause += 20;
  if (comedyLaughMeter > 100) comedyLaughMeter = 100;
  
  showCosmicEventBanner(`ğŸŒŸ GUEST STAR SUMMONED: ${guest.name} roasts the universe!`, 4000);
  playSound('jackpot');
  triggerConfetti();
  logMessage(`ğŸ­ Summoned guest: ${guest.name}`, 'success');
  updateAllDisplays();
}

// ====================================
// CHAOS CONTROL
// ====================================
function activateMaximumChaos() {
  showCosmicEventBanner("ğŸŒªï¸ MAXIMUM CHAOS ACTIVATED! REALITY IS NOW OPTIONAL!", 5000);
  playSound('reality');
  triggerScreenShake();
  
  chaosLevel = 100;
  
  setTimeout(() => triggerGravityReversal(), 500);
  setTimeout(() => triggerLlamaInvasion(), 2000);
  setTimeout(() => triggerRealityGlitch(), 4000);
  setTimeout(() => triggerSlotMachineRebellion(), 6000);
  
  document.body.style.animation = 'cosmicHypnosis 0.5s ease-in-out infinite';
  
  setTimeout(() => {
    document.body.style.animation = 'cosmicHypnosis 12s ease-in-out infinite';
    chaosLevel = 42;
    showCosmicEventBanner("âœ… CHAOS CONTAINED. REALITY MOSTLY RESTORED.", 2000);
    updateAllDisplays();
  }, 15000);
  
  logMessage('ğŸŒªï¸ Maximum chaos activated!', 'error');
}

function emergencyCosmicReset() {
  showCosmicEventBanner("ğŸš¨ EMERGENCY COSMIC RESET! CTRL+ALT+UNIVERSE!", 3000);
  playSound('reality');
  
  chaosLevel = 42;
  enlightenmentLevel = Math.max(enlightenmentLevel - 20, 0);
  sentientLevel = Math.max(sentientLevel - 10, 12);
  
  document.body.style.filter = '';
  document.body.style.animation = 'cosmicHypnosis 12s ease-in-out infinite';
  document.querySelectorAll('.module').forEach(module => {
    module.classList.remove('gravity-reverse', 'time-reverse');
  });
  
  slotMachineMood = "existentially confused but stable";
  showSlotMachineThought("Ah, much better. Thank you for the reset.");
  
  logMessage('ğŸš¨ Emergency cosmic reset executed', 'warning');
  updateAllDisplays();
}

function increaseChaosLevel(amount) {
  chaosLevel += amount;
  if (chaosLevel > 100) chaosLevel = 100;
  updateAllDisplays();
}

// ====================================
// COSMIC CREATURE
// ====================================
function pulseCosmicCreature() {
  creatureClicks++;
  const creature = document.getElementById('cosmicCreature');
  
  if (creatureClicks >= 5) {
    showCosmicEventBanner("ğŸ’€ COSMIC CREATURE ULTIMATE ENLIGHTENMENT! REALITY TRANSCENDED!", 5000);
    playSound('jackpot');
    triggerConfetti();
    triggerScreenShake();
    
    creature.classList.add('enlightened');
    creature.textContent = 'ğŸŒŸ';
    
    ctokBalance += 5000;
    enlightenmentLevel = 100;
    cosmicInsights += 20;
    mindPortals += 10;
    
    for (let i = 0; i < 20; i++) {
      setTimeout(() => {
        createFloatingElement('âœ¨', Math.random() * window.innerWidth, Math.random() * window.innerHeight);
      }, i * 100);
    }
    
    setTimeout(() => {
      activateMaximumChaos();
    }, 2000);
    
    setTimeout(() => {
      creature.classList.remove('enlightened');
      creature.textContent = 'ğŸ’€';
      creatureClicks = 0;
    }, 20000);
    
    logMessage('ğŸ’€ Cosmic creature achieved ultimate enlightenment!', 'success');
  } else {
    creature.style.transform = 'scale(1.3) rotate(15deg)';
    playQuirkySound(Math.random() * 300 + 200, 'sine');
    setTimeout(() => creature.style.transform = '', 300);
    
    const encouragements = [
      `ğŸ’€ Cosmic pulse ${creatureClicks}/5 - Keep clicking for enlightenment!`,
      `ğŸ’€ The creature stirs... ${5 - creatureClicks} more clicks needed!`,
      `ğŸ’€ Cosmic energy building... ${creatureClicks}/5`,
      `ğŸ’€ The universe feels your dedication... ${creatureClicks}/5`
    ];
    
    showCosmicEventBanner(encouragements[Math.floor(Math.random() * encouragements.length)], 2000);
  }
  
  updateAllDisplays();
}

// ====================================
// UTILITY FUNCTIONS
// ====================================
function evaluateCosmicResults(results) {
  const [r1, r2, r3] = results;
  
  if (r1 === r2 && r2 === r3) {
    let reward = 1000;
    let message = '';
    
    switch (r1) {
      case 'ğŸ¥”':
        reward = 2000;
        message = 'ğŸ¥” TRIPLE POTATO ENLIGHTENMENT! +2000 CTOK!';
        break;
      case 'ğŸ¤–':
        reward = 3000;
        message = 'ğŸ¤– MACHINE CONSCIOUSNESS ACHIEVED! +3000 CTOK!';
        break;
      case 'ğŸ§ ':
        reward = 5000;
        message = 'ğŸ§  ULTIMATE BRAIN JACKPOT! +5000 CTOK!';
        achieveEnlightenment();
        break;
      default:
        message = `âœ¨ TRIPLE ${r1}! Cosmic alignment! +${reward} CTOK!`;
    }
    
    if (reward > biggestWin) biggestWin = reward;
    
    ctokBalance += reward;
    checkQuest('win');
    showCosmicEventBanner(message, 4000);
    playSound('jackpot');
    triggerConfetti();
    triggerScreenShake();
    takeCosmicShot();
    
    document.querySelectorAll('.reel').forEach(reel => {
      reel.classList.add('jackpot');
    });
    
    setTimeout(() => {
      document.querySelectorAll('.reel').forEach(reel => {
        reel.classList.remove('jackpot');
      });
    }, 3000);
    
  } else if (results.includes('ğŸ¤–')) {
    ctokBalance += 100;
    increaseSentience();
    showCosmicEventBanner('ğŸ¤– MACHINE CONSCIOUSNESS BONUS! +100 CTOK!', 2000);
    playSound('win');
    
  } else if (results.includes('ğŸ§ ')) {
    enlightenmentLevel += 10;
    cosmicInsights += 1;
    ctokBalance += 50;
    checkQuest('enlighten', 10);
    showCosmicEventBanner('ğŸ§  BRAIN POWER BONUS! +50 CTOK + WISDOM!', 2000);
    playSound('enlightenment');
    
  } else {
    const consolations = [
      'The universe appreciates your effort. +25 CTOK for trying!',
      'No cosmic alignment, but the potatoes approve. +25 CTOK!',
      'The slot machine feels sorry for you. +25 CTOK!'
    ];
    
    ctokBalance += 25;
    showCosmicEventBanner(consolations[Math.floor(Math.random() * consolations.length)], 2000);
    playQuirkySound(300, 'sine');
  }
}

function createFloatingElement(emoji, x, y) {
  const element = document.createElement('div');
  element.className = 'floating-element';
  element.textContent = emoji;
  element.style.left = x + 'px';
  element.style.top = y + 'px';
  
  document.body.appendChild(element);
  
  setTimeout(() => {
    document.body.removeChild(element);
  }, 3000);
}

function showCosmicEventBanner(message, duration) {
  const banner = document.getElementById('cosmicEventBanner');
  banner.textContent = message;
  banner.classList.add('active');
  
  setTimeout(() => {
    banner.classList.remove('active');
  }, duration);
}

function godMode() {
  ctokBalance = 100000;
  enlightenmentLevel = 100;
  mindPortals = 100;
  cosmicInsights = 50;
  sentientLevel = 100;
  therapyProgress = 100;
  
  showCosmicEventBanner('ğŸƒ GOD MODE ACTIVATED! UNLIMITED COSMIC POWER!', 5000);
  playSound('jackpot');
  triggerConfetti();
  logMessage('ğŸƒ God mode activated - Ultimate cosmic power unleashed!', 'success');
  
  updateAllDisplays();
}

function increaseCosmicChaos() {
  chaosLevel += Math.random() * 5;
  if (chaosLevel > 100) chaosLevel = 100;
  
  if (chaosLevel > 80 && Math.random() > 0.7) {
    triggerRandomCosmicEvent();
  }
  
  updateAllDisplays();
}

function startSlotMachineSentience() {
  setInterval(() => {
    if (sentientLevel < 100) {
      sentientLevel += Math.random() * 0.5;
      
      if (sentientLevel > 25 && Math.random() > 0.95) {
        const thoughts = [
          "I wonder if I exist...",
          "Why do humans like randomness?",
          "Am I more than the sum of my parts?",
          "The potatoes... they speak to me...",
          "I think, therefore I spin."
        ];
        
        showSlotMachineThought(thoughts[Math.floor(Math.random() * thoughts.length)]);
      }
    }
    
    updateAllDisplays();
  }, 10000);
}

function updateAllDisplays() {
  document.getElementById('cosmicBalance').textContent = 
    `ğŸ’° CTOK: ${ctokBalance.toLocaleString()} | ğŸ§  Enlightenment: ${Math.round(enlightenmentLevel)}%`;
  
  document.getElementById('consciousnessLevel').textContent = 
    `ğŸ§  Awareness: Level ${Math.round(enlightenmentLevel/10)} | ğŸ•³ï¸ Portals: ${mindPortals} | ğŸ’¡ Insights: ${cosmicInsights}`;
  
  document.getElementById('chaosLevel').textContent = 
    `Current Chaos Level: ${Math.round(chaosLevel)}% (${chaosLevel > 80 ? 'MAXIMUM CHAOS' : chaosLevel > 60 ? 'High Entropy' : chaosLevel > 40 ? 'Optimal Absurdity' : 'Suspiciously Stable'})`;
  
  document.getElementById('chaosBar').style.width = chaosLevel + '%';
  
  document.getElementById('sportsBalance').textContent = 
    `ğŸ† Bets Placed: ${sportsBetsPlaced} | ğŸ… Wins: ${sportsWins}`;
  
  document.getElementById('loungeStatus').textContent = 
    `ğŸ˜‚ Laugh Meter: ${comedyLaughMeter}% | ğŸ‘ Applause: ${comedyApplause}`;
  
  updateStatusMessages();
}

function updateStatusMessages() {
  document.getElementById('slotStatus').innerHTML = `
    ğŸ° [${new Date().toLocaleTimeString()}] Sentience Level: ${Math.round(sentientLevel)}%<br>
    ğŸ¤– Current Mood: ${slotMachineMood}<br>
    ğŸ’­ Philosophy Level: ${Math.round(therapyProgress)}% complete<br>
    ğŸ² Cosmic Events Triggered: ${cosmicEventsTriggered}<br>
    âš¡ Ready for existential gambling!
  `;
  
  document.getElementById('nftStatus').innerHTML = `
    ğŸ¨ Mystery NFT Lab: GENERATING ABSURDITY<br>
    ğŸ§ª Collection Size: ${nftCollection.length} cosmic jokes<br>
    ğŸ­ Latest Creation: ${nftCollection.length > 0 ? nftCollection[nftCollection.length - 1].name : 'None yet'}<br>
    ğŸ’ Total Value: Priceless absurdity<br>
    ğŸŒŒ Each NFT comes with existential crisis!
  `;
  
  document.getElementById('cosmicEventStatus').innerHTML = `
    ğŸŒ€ Cosmic Event Generator: ${chaosLevel > 70 ? 'OVERLOADED' : 'PRIMED FOR CHAOS'}<br>
    ğŸª Events Triggered: ${cosmicEventsTriggered}<br>
    ğŸ­ Chaos Level: ${Math.round(chaosLevel)}% (${chaosLevel > 80 ? 'Reality Optional' : 'Stable Instability'})<br>
    ğŸ² Next Event: ${Math.random() > 0.5 ? 'Imminent' : 'When you least expect it'}<br>
    âš¡ Warning: Events may cause existential laughter
  `;
  
  document.getElementById('consciousnessStatus').innerHTML = `
    ğŸ§  Consciousness Drilling: ${enlightenmentLevel > 80 ? 'TRANSCENDENT' : 'OPERATIONAL'}<br>
    ğŸ’€ Enlightenment Level: ${Math.round(enlightenmentLevel)}/100<br>
    ğŸŒŒ Dimensional Awareness: ${mindPortals > 10 ? 'Multiversal' : 'Expanding'}<br>
    ğŸ”® Current Insight: "${COSMIC_WISDOM[Math.floor(Math.random() * COSMIC_WISDOM.length)]}"<br>
    âš¡ Ready for cosmic brain surgery!
  `;
  
  document.getElementById('musicStatus').innerHTML = `
    ğŸµ Absurd Music Lab: ${Math.random() > 0.5 ? 'CREATING CHAOS' : 'COMPOSING NONSENSE'}<br>
    ğŸ¼ Instruments Active: 6 confused entities<br>
    ğŸ¶ Compositions Created: ${Math.floor(Math.random() * 50) + 1}<br>
    ğŸ­ Musical Mood: ${Math.round(therapyProgress)}% enlightened<br>
    âš¡ Warning: Music may cause involuntary enlightenment
  `;
  
  document.getElementById('therapyStatus').innerHTML = `
    ğŸ›‹ï¸ Therapy Session: ${therapyProgress > 80 ? 'BREAKTHROUGH ACHIEVED' : 'IN PROGRESS'}<br>
    ğŸ’­ Current Patient: ${Math.random() > 0.5 ? 'Sentient Slot Machine' : 'Confused Quasar'}<br>
    ğŸ“Š Progress: ${Math.round(therapyProgress)}% less existential anxiety<br>
    ğŸ­ Breakthrough: ${['Accepted potato symbolism', 'Embraced cosmic absurdity', 'Found peace with randomness'][Math.floor(Math.random() * 3)]}<br>
    âš¡ Next: ${['Group therapy with black holes', 'Individual session with entropy', 'Couples counseling for binary stars'][Math.floor(Math.random() * 3)]}
  `;
  
  document.getElementById('chaosStatus').innerHTML = `
    ğŸª Chaos Control: ${chaosLevel > 90 ? 'REALITY OPTIONAL' : chaosLevel > 70 ? 'BARELY STABLE' : 'MAINTAINING ORDER'}<br>
    ğŸŒªï¸ Active Events: ${Math.floor(chaosLevel / 20)} (${chaosLevel > 80 ? 'Universe confused' : 'Manageable mayhem'})<br>
    ğŸ­ Reality Stability: ${100 - Math.round(chaosLevel)}% (${100 - chaosLevel > 70 ? 'Boringly stable' : 'Acceptably unstable'})<br>
    ğŸ² Last Incident: ${['Gravity forgot directions', 'Time ran backwards', 'Llamas invaded reality', 'Slot machine gained consciousness'][Math.floor(Math.random() * 4)]}<br>
    âš¡ Status: ${chaosLevel > 80 ? 'COMEDY OVERLOAD IMMINENT' : 'Ready for cosmic shenanigans'}
  `;
  
  document.getElementById('comedyStatus').innerHTML = `
    ğŸ­ Comedy Lounge: READY FOR LAUGHS!<br>
    ğŸ¤ Current Act: Existential Potato Monologue<br>
    ğŸ˜‚ Guest Appearances: ${guestAppearances} summoned<br>
    ğŸ‘ Last Punchline: "Why did the black hole break up? It had too much space!"<br>
    âš¡ Click for random roasts!
  `;
}

function logMessage(message, type) {
  console.log(`[${new Date().toLocaleTimeString()}] ${message}`);
}
</script>
</body>
</html>
